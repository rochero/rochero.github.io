<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux- 虚拟机安装与项目部署</title>
      <link href="/2022/07/26/Linux-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E4%B8%8E%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"/>
      <url>/2022/07/26/Linux-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E4%B8%8E%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h3 id="关于虚拟机的安装"><a href="#关于虚拟机的安装" class="headerlink" title="关于虚拟机的安装"></a>关于虚拟机的安装</h3><ul><li><a href="https://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/">阿里云centos 7 x86_64 系统镜像下载</a></li><li><a href="https://www.cnblogs.com/poloyy/p/13921798.html">Vmware - 安装并启动 Centos 7 </a></li></ul><h3 id="关于虚拟机的联网"><a href="#关于虚拟机的联网" class="headerlink" title="关于虚拟机的联网"></a>关于虚拟机的联网</h3><ul><li><a href="https://www.cnblogs.com/cnjavahome/p/11266931.html">VMware 虚拟机三种网络模式详解</a></li><li><a href="https://www.cnblogs.com/cealie/p/15333845.html">vmware下CentOS7虚拟机配置桥接网络</a></li><li><a href="https://blog.csdn.net/trackle400/article/details/52755571">虚拟机下CentOS7开启SSH连接</a></li></ul><h3 id="关于部署前后端分离项目到-Linux-服务器"><a href="#关于部署前后端分离项目到-Linux-服务器" class="headerlink" title="关于部署前后端分离项目到 Linux 服务器"></a>关于部署前后端分离项目到 Linux 服务器</h3><ul><li><a href="https://segmentfault.com/a/1190000021530126">Vue项目打包部署总结</a></li><li><a href="https://www.bilibili.com/video/BV1uK411p7Bp">前后端分离式项目实战部署（含nginx、tomcat部署配置）视频教程</a></li><li><a href="https://blog.csdn.net/qq_43284469/article/details/115800331">在服务器部署若依前后端分离版项目</a></li></ul><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul><li><a href="https://www.vmware.com/products/workstation-pro.html">桌面虚拟计算机软件-Vmware Workstation</a></li><li><a href="https://github.com/kingToolbox/WindTerm">超级终端-windTerm（支持SSH&#x2F;Telnet&#x2F;Serial&#x2F;Shell&#x2F;Sftp）</a></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="修改核心配置"><a href="#修改核心配置" class="headerlink" title="修改核心配置"></a>修改核心配置</h3><ul><li>日志配置：修改日志输出编码格式，使用 UTF-8；</li><li>应用配置：后台服务器启动端口、redis 服务器地址、token 的规则；</li><li>数据源配置：数据库的连接方式；</li></ul><h3 id="前端项目打包"><a href="#前端项目打包" class="headerlink" title="前端项目打包"></a>前端项目打包</h3><ul><li>下载和安装依赖：<code>npm isntall</code> 或 <code>yarn install</code>；</li><li>打包成 dist 目录：<code>npm run build:prod</code>；（指定为生产环境版本）<br>注意配置静态文件的引用地址。</li></ul><h3 id="后端项目打包部署"><a href="#后端项目打包部署" class="headerlink" title="后端项目打包部署"></a>后端项目打包部署</h3><h4 id="jar-包"><a href="#jar-包" class="headerlink" title="jar 包"></a>jar 包</h4><ol><li>maven 打包：<code>mvn package</code>；</li><li>打完包后台运行：<code>nohup java -jar &lt;jar包&gt;.jar &amp;</code>。</li></ol><h4 id="war-包"><a href="#war-包" class="headerlink" title="war 包"></a>war 包</h4><ol><li>pom.xml 指定打成 war 包：<code>&lt;packaging&gt;war&lt;/packaging&gt;</code>；</li><li>如果要部署到单独的 web 容器，那么要排除 SpringBoot 自带的 tomcat 容器：</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>编写一个启动的辅助类：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringBootStartApplication</span> <span class="keyword">extends</span> <span class="title class_">SpringBootServletInitializer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> SpringApplicationBuilder <span class="title function_">configure</span><span class="params">(SpringApplicationBuilder builder)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> builder.sources(&lt;原启动类&gt;.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>把war包放到tomcat&#x2F;webapps中；如果要把后台项目部署到根路径，可以参考：<a href="http://t.zoukankan.com/kioluo-p-6860501.html">将应用部署到Tomcat根目录的三种方法</a>。</li></ol><h3 id="nginx-conf-配置代理"><a href="#nginx-conf-配置代理" class="headerlink" title="nginx.conf 配置代理"></a>nginx.conf 配置代理</h3><ol><li><p>保证权限：<code>user  root;</code>；</p></li><li><p>配置代理：</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen  80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        # root指根路径，值为项目的根目录</span><br><span class="line">        root   /root/dist;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # 代理转发路径为v1的接口到后端</span><br><span class="line">    location /v1/ &#123;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_pass http://127.0.0.1:9527/v1/;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # 代理转发路径为profile的接口到后端</span><br><span class="line">    location /profile/ &#123;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_pass http://127.0.0.1:9527/profile/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改完配置文件记得重启 nginx：<code>./nginx -s -reload</code>。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记，项目部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot-项目常用注解的解释</title>
      <link href="/2022/07/26/SpringBoot-%E9%A1%B9%E7%9B%AE%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E7%9A%84%E8%A7%A3%E9%87%8A/"/>
      <url>/2022/07/26/SpringBoot-%E9%A1%B9%E7%9B%AE%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E7%9A%84%E8%A7%A3%E9%87%8A/</url>
      
        <content type="html"><![CDATA[<h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><h3 id="Component"><a href="#Component" class="headerlink" title="@Component"></a>@Component</h3><p>用于创建当前类的对象，并由Spring容器中统一管理。<br><code>@Controller</code>、<code>@Service</code>、<code>@Repository</code>的作用与<code>@Component</code>一样，但是能更好地区分Spring框架的三层结构。</p><h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><p>自动按照类型注入Bean。只要容器中有唯一的一个bean对象类型和要注入的变量类型匹配，就可以注入成功。可以作用在变量或者方法上。</p><h3 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h3><p>直接按照bean的id注入Bean，可以独立使用。</p><h3 id="Value"><a href="#Value" class="headerlink" title="@Value"></a>@Value</h3><p>用于注入基本类型和String类型的数据。</p><h3 id="Scheduled"><a href="#Scheduled" class="headerlink" title="@Scheduled"></a>@Scheduled</h3><p>在Spring Boot中使用定时任务，只需要@EnableScheduling开启定时任务支持，在需要调度的方法上添加@Scheduled注解，支持通过cron、fixedRate、fixedDelay等灵活的控制执行周期和频率。</p><h2 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h2><h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p>注解为控制器指定可以处理哪些 URL 请求。</p><h3 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h3><p>用于读取Request请求的body部分数据，使用系统默认配置的HttpMessageConverter进行解析，然后把相应的数据绑定到要返回的对象上 ,再把HttpMessageConverter返回的对象数据绑定到 controller中方法的参数上</p><h3 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h3><p>该注解用于将Controller的方法返回的对象，通过适当的HttpMessageConverter转换为指定格式后，写入到Response对象的body数据区。</p><h3 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h3><p>在处理方法入参处使用，可以把请求参数传递给请求方法。</p><h3 id="PathVariable"><a href="#PathVariable" class="headerlink" title="@PathVariable"></a>@PathVariable</h3><p>绑定 URL 占位符到入参。</p><h2 id="Spring-Security"><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h2><h3 id="PreAuthorize"><a href="#PreAuthorize" class="headerlink" title="@PreAuthorize"></a>@PreAuthorize</h3><p>进入方法前验证权限。<br>使用：</p><ol><li>在启动类或配置内开启注解<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableGlobalMethodSecurity(securedEnabled = true,prePostEnabled = true)</span></span><br></pre></td></tr></table></figure></li><li>在controller的方法上添加注解</li></ol><h2 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h2><h3 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h3><p>这个注解是Spring Boot最核心的注解，用在 Spring Boot的主类上，标识这是一个 Spring Boot 应用，用来开启 Spring Boot 的各项能力。实际上这个注解是@Configuration,@EnableAutoConfiguration,@ComponentScan三个注解的组合。由于这些注解一般都是一起使用，所以Spring Boot提供了一个统一的注解@SpringBootApplication。</p><h2 id="LomBok"><a href="#LomBok" class="headerlink" title="LomBok"></a>LomBok</h2><h3 id="Data"><a href="#Data" class="headerlink" title="@Data"></a>@Data</h3><p>注解在类上，提供类所有属性的 getting 和 setting 方法，此外还提供了equals、canEqual、hashCode、toString 方法和@RequiredArgsConstructor注解。</p><h3 id="Builder"><a href="#Builder" class="headerlink" title="@Builder"></a>@Builder</h3><p>注解在类上，被注解的类加上构造者模式（链式赋值）。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-文件上传操作</title>
      <link href="/2022/07/26/Java-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C/"/>
      <url>/2022/07/26/Java-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>文件上传借助于 org.springframework.web.multipart。</p><h2 id="SpringBoot-文件上传配置"><a href="#SpringBoot-文件上传配置" class="headerlink" title="SpringBoot 文件上传配置"></a>SpringBoot 文件上传配置</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">servlet:</span></span><br><span class="line">        <span class="attr">multipart:</span></span><br><span class="line">            <span class="comment"># 单个文件大小</span></span><br><span class="line">            <span class="attr">max-file-size:</span>  <span class="string">100MB</span></span><br><span class="line">            <span class="comment"># 设置总上传的文件大小</span></span><br><span class="line">            <span class="attr">max-request-size:</span>  <span class="string">200MB</span></span><br></pre></td></tr></table></figure><h2 id="Contorller层中的上传接口"><a href="#Contorller层中的上传接口" class="headerlink" title="Contorller层中的上传接口"></a>Contorller层中的上传接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ServerConfig serverConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用上传请求</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResultJson <span class="title function_">uploadFile</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 上传文件路径（配置文件中配置的上传路径）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> MyConfig.getUploadPath();</span><br><span class="line">        <span class="comment">// 上传并返回新文件名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> FileUploadUtils.upload(filePath, file);</span><br><span class="line">        <span class="comment">// 文件的请求路径（绝对路径）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> serverConfig.getUrl() + fileName;</span><br><span class="line">        <span class="comment">// 构造返回给前台的json</span></span><br><span class="line">        Map&lt;String, String&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">        params.put(<span class="string">&quot;fileName&quot;</span>, fileName);</span><br><span class="line">        params.put(<span class="string">&quot;url&quot;</span>, url);</span><br><span class="line">        <span class="keyword">return</span> ResultJson.ok(params);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">return</span> ResultJson.failure(ResultCode.BAD_REQUEST, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="上传工具类中的核心方法"><a href="#上传工具类中的核心方法" class="headerlink" title="上传工具类中的核心方法"></a>上传工具类中的核心方法</h2><h3 id="上传方法"><a href="#上传方法" class="headerlink" title="上传方法"></a>上传方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据文件路径上传</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> baseDir 相对应用的基目录</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> file 上传的文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 文件名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">upload</span><span class="params">(String baseDir, MultipartFile file)</span> <span class="keyword">throws</span> IOException</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> upload(baseDir, file, MimeTypeUtils.DEFAULT_ALLOWED_EXTENSION);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IOException</span>(e.getMessage(), e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件上传</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> baseDir 相对应用的基目录</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> file 上传的文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> allowedExtension 上传文件类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回上传成功的文件名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> FileSizeLimitExceededException 如果超出最大大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> FileNameLengthLimitExceededException 文件名太长</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException 比如读写文件出错时</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InvalidExtensionException 文件校验异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">upload</span><span class="params">(String baseDir, MultipartFile file, String[] allowedExtension)</span></span><br><span class="line">        <span class="keyword">throws</span> FileSizeLimitExceededException, IOException, FileNameLengthLimitExceededException,</span><br><span class="line">        InvalidExtensionException</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">fileNameLength</span> <span class="operator">=</span> file.getOriginalFilename().length();</span><br><span class="line">    <span class="keyword">if</span> (fileNameLength &gt; FileUploadUtils.DEFAULT_FILE_NAME_LENGTH)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileNameLengthLimitExceededException</span>(FileUploadUtils.DEFAULT_FILE_NAME_LENGTH);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 文件大小和后缀校验，如果不合法会抛相应的异常</span></span><br><span class="line">    assertAllowed(file, allowedExtension);</span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> extractFileName(file);</span><br><span class="line">    <span class="type">File</span> <span class="variable">desc</span> <span class="operator">=</span> getAbsoluteFile(baseDir, fileName);</span><br><span class="line">    file.transferTo(desc);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pathFileName</span> <span class="operator">=</span> getPathFileName(baseDir, fileName);</span><br><span class="line">    <span class="keyword">return</span> pathFileName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="构造文件路径和请求路径"><a href="#构造文件路径和请求路径" class="headerlink" title="构造文件路径和请求路径"></a>构造文件路径和请求路径</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 编码文件名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">extractFileName</span><span class="params">(MultipartFile file)</span></span><br><span class="line">&#123;</span><br><span class="line">    String fileName;</span><br><span class="line">    <span class="type">String</span> <span class="variable">extension</span> <span class="operator">=</span> getExtension(file);</span><br><span class="line">    <span class="comment">//文件名形式：yyyy/MM/dd/&lt;UUID&gt;.&lt;扩展名&gt;</span></span><br><span class="line">    fileName = DateUtils.datePath() + <span class="string">&quot;/&quot;</span> + IdUtils.fastUUID() + <span class="string">&quot;.&quot;</span> + extension;</span><br><span class="line">    <span class="keyword">return</span> fileName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过绝对路径创建空的目标文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> File <span class="title function_">getAbsoluteFile</span><span class="params">(String uploadDir, String fileName)</span> <span class="keyword">throws</span> IOException</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">desc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(uploadDir + File.separator + fileName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!desc.getParentFile().exists())</span><br><span class="line">    &#123;</span><br><span class="line">        desc.getParentFile().mkdirs();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!desc.exists())</span><br><span class="line">    &#123;</span><br><span class="line">        desc.createNewFile();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> desc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 构造文件请求的相对路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">getPathFileName</span><span class="params">(String uploadDir, String fileName)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">dirLastIndex</span> <span class="operator">=</span> MyConfig.getProfile().length();</span><br><span class="line">    <span class="type">String</span> <span class="variable">currentDir</span> <span class="operator">=</span> StringUtils.substring(uploadDir, dirLastIndex);</span><br><span class="line">    <span class="comment">// 构造请求文件资源的路径，避免给前台暴露服务器上文件的实际路径</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">pathFileName</span> <span class="operator">=</span> Constants.RESOURCE_PREFIX + <span class="string">&quot;/&quot;</span> + currentDir + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">    <span class="keyword">return</span> pathFileName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POI Excel 导入导出操作</title>
      <link href="/2022/07/26/POI-Excel-%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E6%93%8D%E4%BD%9C/"/>
      <url>/2022/07/26/POI-Excel-%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="一、基本思想"><a href="#一、基本思想" class="headerlink" title="一、基本思想"></a>一、基本思想</h2><p>面向对象思想，工作簿、行、列都是一个对象。</p><h3 id="xls和xlsx的区别"><a href="#xls和xlsx的区别" class="headerlink" title="xls和xlsx的区别"></a>xls和xlsx的区别</h3><ul><li><p>最大行列得数量不同：</p><ul><li>xls： 65536行(2的16次方)、256列</li><li>xlsx： 1048576行(2的20次方)、16384列</li></ul></li><li><p>对应的列的读写时长不一样，注意优化，xlsx类型推荐用 SXSSFWorkbook 类写，边写边存。</p></li></ul><h2 id="二、Maven配置"><a href="#二、Maven配置" class="headerlink" title="二、Maven配置"></a>二、Maven配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 导入依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- xls(03) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- xlsx(07) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日期格式化工具 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- test --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.jupiter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-jupiter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三、相关代码"><a href="#三、相关代码" class="headerlink" title="三、相关代码"></a>三、相关代码</h2><p>公共路径（成员变量）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">PATH</span> <span class="operator">=</span> <span class="string">&quot;路径&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="1-写操作"><a href="#1-写操作" class="headerlink" title="1. 写操作"></a>1. 写操作</h3><h4 id="1-1-Java操作xls文件"><a href="#1-1-Java操作xls文件" class="headerlink" title="1.1 Java操作xls文件"></a>1.1 Java操作xls文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ExcelWriteTest03</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1.创建一个工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFWorkbook</span>();</span><br><span class="line">    <span class="comment">// 2.创建一个工作表</span></span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;我的工作表1&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.创建一个行</span></span><br><span class="line">    <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 4.创建一个单元格</span></span><br><span class="line">    <span class="comment">// (1,1)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell11</span> <span class="operator">=</span> row.createCell(<span class="number">0</span>);</span><br><span class="line">    cell11.setCellValue(<span class="string">&quot;今日学习情况&quot;</span>);</span><br><span class="line">    <span class="comment">// (1,2)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell12</span> <span class="operator">=</span> row.createCell(<span class="number">1</span>);</span><br><span class="line">    cell12.setCellValue(<span class="string">&quot;poi学习&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">Row</span> <span class="variable">row2</span> <span class="operator">=</span> sheet.createRow(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// (2,1)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell21</span> <span class="operator">=</span> row2.createCell(<span class="number">0</span>);</span><br><span class="line">    cell21.setCellValue(<span class="string">&quot;学习时间&quot;</span>);</span><br><span class="line">    <span class="comment">// (2,2)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell22</span> <span class="operator">=</span> row2.createCell(<span class="number">1</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">time</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DateTime</span>().toString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    cell22.setCellValue(time);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成一张表 -&gt; IO流 -&gt; 03 版本使用 .xls 结尾</span></span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(PATH + <span class="string">&quot;今日学习情况03.xls&quot;</span>);</span><br><span class="line">    <span class="comment">// 输出</span></span><br><span class="line">    workbook.write(fileOutputStream);</span><br><span class="line">    <span class="comment">// 关闭流</span></span><br><span class="line">    fileOutputStream.close();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;今日学习情况03.xls 生成完毕！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-Java操作xlsx文件"><a href="#1-2-Java操作xlsx文件" class="headerlink" title="1.2 Java操作xlsx文件"></a>1.2 Java操作xlsx文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ExcelWriteTest07</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1.创建一个工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>();</span><br><span class="line">    <span class="comment">// 2.创建一个工作表</span></span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;我的工作表1&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.创建一个行</span></span><br><span class="line">    <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 4.创建一个单元格</span></span><br><span class="line">    <span class="comment">// (1,1)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell11</span> <span class="operator">=</span> row.createCell(<span class="number">0</span>);</span><br><span class="line">    cell11.setCellValue(<span class="string">&quot;今日学习情况&quot;</span>);</span><br><span class="line">    <span class="comment">// (1,2)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell12</span> <span class="operator">=</span> row.createCell(<span class="number">1</span>);</span><br><span class="line">    cell12.setCellValue(<span class="string">&quot;poi学习&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">Row</span> <span class="variable">row2</span> <span class="operator">=</span> sheet.createRow(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// (2,1)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell21</span> <span class="operator">=</span> row2.createCell(<span class="number">0</span>);</span><br><span class="line">    cell21.setCellValue(<span class="string">&quot;学习时间&quot;</span>);</span><br><span class="line">    <span class="comment">// (2,2)</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell22</span> <span class="operator">=</span> row2.createCell(<span class="number">1</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">time</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DateTime</span>().toString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    cell22.setCellValue(time);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成一张表 -&gt; IO流 -&gt; 03 版本使用 .xlsx 结尾</span></span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(PATH + <span class="string">&quot;今日学习情况07.xlsx&quot;</span>);</span><br><span class="line">    <span class="comment">// 输出</span></span><br><span class="line">    workbook.write(fileOutputStream);</span><br><span class="line">    <span class="comment">// 关闭流</span></span><br><span class="line">    fileOutputStream.close();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;今日学习情况07.xlsx 生成完毕！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-写大量数据对比与优化"><a href="#1-3-写大量数据对比与优化" class="headerlink" title="1.3 写大量数据对比与优化"></a>1.3 写大量数据对比与优化</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ExcelWriteTest03BigDate</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// 创建工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFWorkbook</span>();</span><br><span class="line">    <span class="comment">// 创建工作表</span></span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;我的工作簿&quot;</span>);</span><br><span class="line">    <span class="comment">// 写入数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">65536</span>; i++) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    </span><br><span class="line">            <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> row.createCell(j);</span><br><span class="line">            cell.setCellValue(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(PATH + <span class="string">&quot;ExcelWriteTest03BigDate.xls&quot;</span>);</span><br><span class="line">    workbook.write(fileOutputStream);</span><br><span class="line">    fileOutputStream.close();</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println((<span class="type">double</span>) (end - begin) / <span class="number">1000</span>); <span class="comment">// 3.831</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 耗时较长 优化 =&gt; 缓存</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ExcelWriteTest07BigDate</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// 创建工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>();</span><br><span class="line">    <span class="comment">// 创建工作表</span></span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;我的工作簿&quot;</span>);</span><br><span class="line">    <span class="comment">// 写入数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">65536</span>; i++) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    </span><br><span class="line">            <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> row.createCell(j);</span><br><span class="line">            cell.setCellValue(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(PATH + <span class="string">&quot;ExcelWriteTest07BigDate.xlsx&quot;</span>);</span><br><span class="line">    workbook.write(fileOutputStream);</span><br><span class="line">    fileOutputStream.close();</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println((<span class="type">double</span>) (end - begin) / <span class="number">1000</span>); <span class="comment">// 26.024</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ExcelWriteTest07BigDateS</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// 创建工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SXSSFWorkbook</span>();</span><br><span class="line">    <span class="comment">// 创建工作表</span></span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;我的工作簿&quot;</span>);</span><br><span class="line">    <span class="comment">// 写入数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">65536</span>; i++) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    </span><br><span class="line">            <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> row.createCell(j);</span><br><span class="line">            cell.setCellValue(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(PATH + <span class="string">&quot;ExcelWriteTest07BigDateS.xlsx&quot;</span>);</span><br><span class="line">    workbook.write(fileOutputStream);</span><br><span class="line">    fileOutputStream.close();</span><br><span class="line">    <span class="comment">// 清除临时文件</span></span><br><span class="line">    ((SXSSFWorkbook) workbook).dispose();</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println((<span class="type">double</span>) (end - begin) / <span class="number">1000</span>); <span class="comment">// 5.029</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-读操作"><a href="#2-读操作" class="headerlink" title="2. 读操作"></a>2. 读操作</h3><h4 id="2-1-Java操作xls文件"><a href="#2-1-Java操作xls文件" class="headerlink" title="2.1 Java操作xls文件"></a>2.1 Java操作xls文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ExcelReadTest03</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 0.获取文件流</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(PATH + <span class="string">&quot;今日学习情况03.xls&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.得到一个工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFWorkbook</span>(inputStream);</span><br><span class="line">    <span class="comment">// 2.得到工作表</span></span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.getSheetAt(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 3.得到行</span></span><br><span class="line">    <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 4.读取列</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> row.getCell(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取值的时候，一定要注意类型！</span></span><br><span class="line">    System.out.println(cell.getStringCellValue());</span><br><span class="line"></span><br><span class="line">    inputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-Java操作xlsx文件"><a href="#2-2-Java操作xlsx文件" class="headerlink" title="2.2 Java操作xlsx文件"></a>2.2 Java操作xlsx文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ExcelReadTest07</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 0.获取文件流</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(PATH + <span class="string">&quot;今日学习情况07.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.得到一个工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>(inputStream);</span><br><span class="line">    <span class="comment">// 2.得到工作表</span></span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.getSheetAt(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 3.得到行</span></span><br><span class="line">    <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 4.读取列</span></span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> row.getCell(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取值的时候，一定要注意类型！</span></span><br><span class="line">    System.out.println(cell.getStringCellValue());</span><br><span class="line"></span><br><span class="line">    inputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-获取单元格类型"><a href="#2-3-获取单元格类型" class="headerlink" title="2.3 获取单元格类型"></a>2.3 获取单元格类型</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCellType</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 0.获取文件流</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(PATH + <span class="string">&quot;工资申报表.xls&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.得到一个工作簿</span></span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFWorkbook</span>(inputStream);</span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.getSheetAt(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 2.获取标题内容</span></span><br><span class="line">    <span class="type">Row</span> <span class="variable">rowTitle</span> <span class="operator">=</span> sheet.getRow(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (rowTitle != <span class="literal">null</span>) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// 一定要掌握 要使用 getLastCellNum()</span></span><br><span class="line">        <span class="comment">// getLastCellNum() =&gt; 获取最后一个索引;</span></span><br><span class="line">        <span class="comment">// getPhysicalNumberOfCells() =&gt; 获取不为空的总数，有空会遍历不完</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">cellCount</span> <span class="operator">=</span> rowTitle.getLastCellNum();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">cellNum</span> <span class="operator">=</span> <span class="number">0</span>; cellNum &lt; cellCount; cellNum++) &#123;</span><br><span class="line">    </span><br><span class="line">            <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> rowTitle.getCell(cellNum);</span><br><span class="line">            <span class="keyword">if</span> (cell != <span class="literal">null</span>) &#123;</span><br><span class="line">    </span><br><span class="line">                <span class="type">int</span> <span class="variable">cellType</span> <span class="operator">=</span> cell.getCellType();</span><br><span class="line">                <span class="type">String</span> <span class="variable">cellValue</span> <span class="operator">=</span> cell.getStringCellValue();</span><br><span class="line">                System.out.print(cellValue + <span class="string">&quot; | &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取表中内容</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">rowCount</span> <span class="operator">=</span> sheet.getPhysicalNumberOfRows();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">rowNum</span> <span class="operator">=</span> <span class="number">1</span>; rowNum &lt; rowCount; rowNum++) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="type">Row</span> <span class="variable">rowData</span> <span class="operator">=</span> sheet.getRow(rowNum);</span><br><span class="line">        <span class="keyword">if</span> (rowData != <span class="literal">null</span>) &#123;</span><br><span class="line">    </span><br><span class="line">            <span class="comment">// 读取列</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">cellCount</span> <span class="operator">=</span> rowData.getLastCellNum();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">cellNum</span> <span class="operator">=</span> <span class="number">0</span>; cellNum &lt; cellCount; cellNum++) &#123;</span><br><span class="line">    </span><br><span class="line">                System.out.print(<span class="string">&quot;[&quot;</span> + (rowNum + <span class="number">1</span>) + <span class="string">&quot;-&quot;</span> + (cellNum + <span class="number">1</span>) + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">                <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> rowData.getCell(cellNum);</span><br><span class="line">                <span class="comment">// 匹配列的数据类型 新版本有变换</span></span><br><span class="line">                <span class="keyword">if</span> (cell != <span class="literal">null</span>) &#123;</span><br><span class="line">    </span><br><span class="line">                    <span class="type">int</span> <span class="variable">cellType</span> <span class="operator">=</span> cell.getCellType();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">cellValue</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">switch</span> (cellType) &#123;</span><br><span class="line">    </span><br><span class="line">                        <span class="keyword">case</span> HSSFCell.CELL_TYPE_STRING: <span class="comment">// 字符串</span></span><br><span class="line">                            System.out.print(<span class="string">&quot;【STRING】&quot;</span>);</span><br><span class="line">                            cellValue = cell.getStringCellValue();</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> HSSFCell.CELL_TYPE_BOOLEAN: <span class="comment">// 布尔</span></span><br><span class="line">                            System.out.print(<span class="string">&quot;【BOOLEAN】&quot;</span>);</span><br><span class="line">                            cellValue = String.valueOf(cell.getBooleanCellValue());</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> HSSFCell.CELL_TYPE_BLANK: <span class="comment">// 空</span></span><br><span class="line">                            System.out.print(<span class="string">&quot;【BLANK】&quot;</span>);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> HSSFCell.CELL_TYPE_NUMERIC: <span class="comment">// 数字（日期、普通数据）</span></span><br><span class="line">                            System.out.print(<span class="string">&quot;【NUMERIC】&quot;</span>);</span><br><span class="line">                            <span class="keyword">if</span> (HSSFDateUtil.isCellDateFormatted(cell)) &#123;</span><br><span class="line">     <span class="comment">// 日期 可能无法识别</span></span><br><span class="line">                                System.out.print(<span class="string">&quot;【日期】&quot;</span>);</span><br><span class="line">                                <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> cell.getDateCellValue();</span><br><span class="line">                                cellValue = <span class="keyword">new</span> <span class="title class_">DateTime</span>(date).toString(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    </span><br><span class="line">                                <span class="comment">// 不是日期格式 防止数字过长</span></span><br><span class="line">                                System.out.print(<span class="string">&quot;【数字 转换为字符串输出】&quot;</span>);</span><br><span class="line">                                cell.setCellType(HSSFCell.CELL_TYPE_STRING);</span><br><span class="line">                                cellValue = cell.toString();</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> HSSFCell.CELL_TYPE_ERROR: <span class="comment">// 空</span></span><br><span class="line">                            System.out.print(<span class="string">&quot;【数据类型错误】&quot;</span>);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(cellValue);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    inputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-读取公式"><a href="#2-4-读取公式" class="headerlink" title="2.4 读取公式"></a>2.4 读取公式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFormula</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(PATH + <span class="string">&quot;公式.xls&quot;</span>);</span><br><span class="line">    <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFWorkbook</span>(inputStream);</span><br><span class="line">    <span class="type">Sheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.getSheetAt(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">Row</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(<span class="number">4</span>);</span><br><span class="line">    <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> row.getCell(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拿到计算公式 eval</span></span><br><span class="line">    <span class="type">FormulaEvaluator</span> <span class="variable">formulaEvaluator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFFormulaEvaluator</span>((HSSFWorkbook) workbook);</span><br><span class="line">    <span class="type">int</span> <span class="variable">cellType</span> <span class="operator">=</span> cell.getCellType();</span><br><span class="line">    <span class="keyword">switch</span> (cellType) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">case</span> Cell.CELL_TYPE_FORMULA: <span class="comment">// 公式</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">cellFormula</span> <span class="operator">=</span> cell.getCellFormula();</span><br><span class="line">            System.out.println(cellFormula);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 计算</span></span><br><span class="line">            <span class="type">CellValue</span> <span class="variable">evaluate</span> <span class="operator">=</span> formulaEvaluator.evaluate(cell);</span><br><span class="line">            <span class="type">String</span> <span class="variable">cellValue</span> <span class="operator">=</span> evaluate.formatAsString();</span><br><span class="line">            System.out.println(cellValue);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;其余&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    inputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> POI </tag>
            
            <tag> Excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL基础语法</title>
      <link href="/2022/07/26/SQL%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
      <url>/2022/07/26/SQL%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="一、SQL-概述"><a href="#一、SQL-概述" class="headerlink" title="一、SQL 概述"></a>一、SQL 概述</h2><h3 id="功能概述"><a href="#功能概述" class="headerlink" title="功能概述"></a>功能概述</h3><ul><li>SQL语言是集DDL、DML和DCL于一体的数据库语言</li><li>SQL语言主要由以下9个单词引导的操作语句来构成，但每一种语句都能表达复杂的操作请求</li><li>DDL语句引导词：Create(建立), Alter (修改), Drop(撤消)<ul><li>模式的定义和删除，包括定义Database, Table, View, Index, 完整性约束条件等，也包括定义对象(RowType行对象, Type列对象)</li></ul></li><li>DML语句引导词：Insert , Delete, Update, Select<ul><li>各种方式的更新与检索操作，如直接输入记录，从其他Table(由SubQuery建立)输入</li><li>各种复杂条件的检索，如连接查找，模糊查找，分组查找，嵌套查找等</li><li>各种聚集操作，求平均、求和、…等，分组聚集，分组过滤等</li></ul></li><li>DCL语句引导词：Grant, Revoke<ul><li>安全性控制：授权和撤消授权</li></ul></li></ul><h3 id="1-创建数据库"><a href="#1-创建数据库" class="headerlink" title="1. 创建数据库"></a>1. 创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database 数据库名;</span><br></pre></td></tr></table></figure><p>后面的示例中的数据库有以下关系模式：</p><ul><li>学生：学号S#, 姓名Sname, 性别Ssex, 年龄Sage, 所属系别D#，班级Sclass<br>Student ( S# char(8), Sname char(10), Ssex char(2), Sage integer, D# char(2), Sclass char(6) )</li><li>院系：系别D#，系名Dname, 系主任Dean<br>Dept ( D# char(2), Dname char(10), Dean char(10) )</li><li>课程：课号C#, 课名Cname, 教师编号T#, 学时Chours，学分Credit，Course ( C# char(3), Cname char(12), Chours integer, Credit float(1), T# char(3) )</li><li>教师：教师编号T#，教师名Tname, 所属院系D#，工资Salary<br>Teacher ( T# char(3), Tname char(10), D# char(2), Salary float(2) )</li><li>选课：学号S#, 课号C#, 成绩Score<br>SC ( S# char(8), C# char(3), Score float(1) )</li></ul><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> 表名( 列名 数据类型 [<span class="keyword">Primary</span> key <span class="operator">|</span><span class="keyword">Unique</span>] [<span class="keyword">Not</span> <span class="keyword">null</span>]</span><br><span class="line">[, 列名 数据类型 [<span class="keyword">Not</span> <span class="keyword">null</span>] , … ]) ;</span><br></pre></td></tr></table></figure><ul><li>Primary key: 主键约束。每个表只能创建一个主键约束。</li><li>Unique: 唯一性约束(即候选键)。可以有多个唯一性约束。</li><li>Not null: 非空约束。是指该列是否允许出现空值。</li><li>语法中的数据类型在SQL标准中有定义。</li></ul><h4 id="向表中追加元组"><a href="#向表中追加元组" class="headerlink" title="向表中追加元组"></a>向表中追加元组</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名[ (列名 [, 列名 ]… ]</span><br><span class="line"><span class="keyword">values</span> (值 [, 值] , …) ;</span><br></pre></td></tr></table></figure><ul><li>values后面值的排列，须与into子句后面的列名排列一致</li><li>若表名后的所有列名省略， 则values后的值的排列，须与该表存储中的列名排列一致</li></ul><h3 id="2-简单单表查询"><a href="#2-简单单表查询" class="headerlink" title="2. 简单单表查询"></a>2. 简单单表查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> 列名 [[, 列名] … ]</span><br><span class="line"><span class="keyword">From</span> 表名</span><br><span class="line">[ <span class="keyword">Where</span> 检索条件 ];</span><br></pre></td></tr></table></figure><ul><li>检索条件的逻辑运算符用 and, or, not 来表示，注意运算符的优先次序及括弧的使用。</li></ul><p>例1：检索教师表中所有工资少于1500元或者工资大于2000元并且是03系的教师姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Tname</span><br><span class="line"><span class="keyword">From</span> Teacher</span><br><span class="line"><span class="keyword">Where</span> (Salary <span class="operator">&lt;</span> <span class="number">1500</span> <span class="keyword">or</span> Salary <span class="operator">&gt;</span> <span class="number">2000</span>) <span class="keyword">and</span> D# <span class="operator">=</span> ’<span class="number">03</span>’;</span><br></pre></td></tr></table></figure><p>例2：求或者学过001号课程, 或者学过002号课程的学生的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span> <span class="keyword">OR</span> C#<span class="operator">=</span><span class="string">&#x27;002&#x27;</span>;</span><br></pre></td></tr></table></figure><p>例3：求既学过001号课程, 又学过002号课程的学生的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 见多表联合查询等值连接例3</span></span><br></pre></td></tr></table></figure><p>例4：在选课表中，检索成绩大于80分的所有学号</p><h4 id="查询结果去重"><a href="#查询结果去重" class="headerlink" title="查询结果去重"></a>查询结果去重</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- DISTINCT 去重</span></span><br><span class="line"><span class="keyword">Select</span> <span class="keyword">DISTINCT</span> S#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> Score <span class="operator">&gt;</span> <span class="number">80</span>;</span><br></pre></td></tr></table></figure><h4 id="查询结果排序"><a href="#查询结果排序" class="headerlink" title="查询结果排序"></a>查询结果排序</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 列名 [<span class="keyword">asc</span> <span class="operator">|</span> <span class="keyword">desc</span>]</span><br></pre></td></tr></table></figure><p>例1：按学号由小到大的顺序显示出所有学生的学号及姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#, Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> S# <span class="keyword">ASC</span> ;</span><br></pre></td></tr></table></figure><p>例2：检索002号课大于80分的所有同学学号并按成绩由高到低顺序显示</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S# <span class="keyword">From</span> SC <span class="keyword">Where</span> C# <span class="operator">=</span> ‘<span class="number">002</span>’ <span class="keyword">and</span> Score <span class="operator">&gt;</span> <span class="number">80</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> Score <span class="keyword">DESC</span> ;</span><br></pre></td></tr></table></figure><h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">列名 [<span class="keyword">not</span> ] <span class="keyword">like</span> <span class="string">&#x27;字符串&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>找出匹配给定字符串的字符串。其中给定字符串中可以出现匹配符。</li><li>匹配规则：<ul><li><code>%</code>匹配零个或多个字符</li><li><code>_</code> 匹配任意单个字符</li><li><code>\</code> 转义字符，去掉特殊字符的特定含义, 如用<code>\%</code>去匹配字符<code>%</code>，用<code>\_</code>去匹配字符<code>_</code></li></ul></li></ul><p>例1：检索所有姓张的学生学号及姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#, Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">Like</span> <span class="string">&#x27;张%&#x27;</span> ;</span><br></pre></td></tr></table></figure><p>例2：检索名字为张某某的所有同学姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">Like</span> <span class="string">&#x27;张_ _&#x27;</span>;</span><br></pre></td></tr></table></figure><p>例3：检索名字不姓张的所有同学姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">Not</span> <span class="keyword">Like</span> <span class="string">&#x27;张%&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="3-多表联合查询"><a href="#3-多表联合查询" class="headerlink" title="3. 多表联合查询"></a>3. 多表联合查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> 列名 [ [, 列名] … ]</span><br><span class="line"><span class="keyword">From</span> 表名<span class="number">1</span>, 表名<span class="number">2</span>, …</span><br><span class="line"><span class="keyword">Where</span> 检索条件 ;</span><br></pre></td></tr></table></figure><ul><li>检索条件中要包含连接条件，通过不同的连接条件可以实现等值连接、不等值连接及各种θ-连接</li></ul><h4 id="θ-连接之等值连接"><a href="#θ-连接之等值连接" class="headerlink" title="θ-连接之等值连接"></a>θ-连接之等值连接</h4><p>例1：按“001”号课成绩由高到低顺序显示所有学生的姓名(二表连接)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student, SC</span><br><span class="line"><span class="keyword">Where</span> Student.S# <span class="operator">=</span> SC.S# <span class="keyword">and</span> SC.C# <span class="operator">=</span> ‘<span class="number">001</span>’</span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> Score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p>例2：按“数据库”课成绩由高到低顺序显示所有同学姓名(三表连接)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student, SC, Course</span><br><span class="line"><span class="keyword">Where</span> Student.S# <span class="operator">=</span> SC.S# <span class="keyword">and</span> SC.C# <span class="operator">=</span> Course.C#</span><br><span class="line"><span class="keyword">and</span> Cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> Score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><h4 id="表更名与表别名"><a href="#表更名与表别名" class="headerlink" title="表更名与表别名"></a>表更名与表别名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> 列名 <span class="keyword">as</span> 列别名 [ [, 列名 <span class="keyword">as</span> 列别名] … ]</span><br><span class="line"><span class="keyword">From</span> 表名<span class="number">1</span> <span class="keyword">as</span> 表别名<span class="number">1</span>, 表名<span class="number">2</span> <span class="keyword">as</span> 表别名<span class="number">2</span>, …</span><br><span class="line"><span class="keyword">Where</span> 检索条件 ;</span><br></pre></td></tr></table></figure><ul><li>上述定义中的 as 可以省略</li><li>当定义了别名后，在检索条件中可以使用别名来限定属性</li></ul><h4 id="不等值连接"><a href="#不等值连接" class="headerlink" title="不等值连接"></a>不等值连接</h4><p>例1：求有薪水差额的任意两位教师</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> T1.Tname <span class="keyword">as</span> Teacher1, T2.Tname <span class="keyword">as</span> Teacher2</span><br><span class="line"><span class="keyword">From</span> Teacher T1, Teacher T2</span><br><span class="line"><span class="keyword">Where</span> T1.Salary <span class="operator">&gt;</span> T2.Salary ;</span><br></pre></td></tr></table></figure><p>例2：求年龄有差异的任意两位同学的姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S1.Sname <span class="keyword">as</span> Stud1, S2.Sname <span class="keyword">as</span> Stud2</span><br><span class="line"><span class="keyword">From</span> Student S1, Student S2</span><br><span class="line"><span class="keyword">Where</span> S1.Sage <span class="operator">&gt;</span> S2.Sage ;</span><br></pre></td></tr></table></figure><h4 id="综合训练"><a href="#综合训练" class="headerlink" title="综合训练"></a>综合训练</h4><p>例1：求既学过“001”号课又学过“002”号课的所有学生的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S1.S# <span class="keyword">From</span> SC S1, SC S2</span><br><span class="line"><span class="keyword">Where</span> S1.S# <span class="operator">=</span> S2.S# <span class="keyword">and</span> S1.C#<span class="operator">=</span><span class="string">&#x27;001&#x27;</span></span><br><span class="line"><span class="keyword">and</span> S2.C#<span class="operator">=</span><span class="string">&#x27;002&#x27;</span>;</span><br></pre></td></tr></table></figure><p>例2：求“001”号课成绩比“002”号课成绩高的所有学生的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S1.S# <span class="keyword">From</span> SC S1, SC S2</span><br><span class="line"><span class="keyword">Where</span> S1.S# <span class="operator">=</span> S2.S# <span class="keyword">and</span> S1.C#<span class="operator">=</span><span class="string">&#x27;001&#x27;</span></span><br><span class="line"><span class="keyword">and</span> S2.C#<span class="operator">=</span><span class="string">&#x27;002&#x27;</span> <span class="keyword">and</span> S1.Score <span class="operator">&gt;</span> S2.Score;</span><br></pre></td></tr></table></figure><p>例3：列出没学过李明老师讲授课程的所有同学的姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 见后面</span></span><br></pre></td></tr></table></figure><h3 id="4-增删改的操作"><a href="#4-增删改的操作" class="headerlink" title="4. 增删改的操作"></a>4. 增删改的操作</h3><h4 id="增加（Insert）"><a href="#增加（Insert）" class="headerlink" title="增加（Insert）"></a>增加（Insert）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单一元组新增：插入一条指定元组值的元组</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名[(列名[，列名]…)]</span><br><span class="line"><span class="keyword">values</span> (值[，值]…);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 批数据新增命令形式：插入子查询结果中的若干条元组。待插入的元组由子查询给出。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名[(列名[，列名]…)]</span><br><span class="line">子查询;</span><br></pre></td></tr></table></figure><p>例1：新建Table: St(S#, Sname), 将检索到的满足条件的同学新增到该表中</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> St (S#, Sname)</span><br><span class="line"><span class="keyword">Select</span> S#, Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">like</span> <span class="string">&#x27;%伟&#x27;</span> ;</span><br></pre></td></tr></table></figure><p>例2：新建Table: SCt(S#, C#, Score), 将检索到的成绩及格同学的记录新增到该表中</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SCt (S#, C#, Score)</span><br><span class="line"><span class="keyword">Select</span> S#, C#, Score</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> Score<span class="operator">&gt;=</span><span class="number">60</span> ;</span><br></pre></td></tr></table></figure><p>例3：新建Table: St(S#, Sname, avgScore), 将检索到的同学的平均成绩新增到该表中</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> St (S#, Sname, avgScore)</span><br><span class="line"><span class="keyword">Select</span> S#, Sname, <span class="built_in">Avg</span>(Score)</span><br><span class="line"><span class="keyword">From</span> Student, SC</span><br><span class="line"><span class="keyword">Where</span> Student.S# <span class="operator">=</span> SC.S#</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> Student.S# ;</span><br></pre></td></tr></table></figure><h4 id="删除（Delete）"><a href="#删除（Delete）" class="headerlink" title="删除（Delete）"></a>删除（Delete）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> 表名[ <span class="keyword">Where</span> 条件表达式] ;</span><br></pre></td></tr></table></figure><ul><li>如果Where条件省略，则删除所有的元组。</li></ul><p>例1：删除98030101号同学所选的所有课程</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> SC <span class="keyword">Where</span> S# <span class="operator">=</span> <span class="string">&#x27;98030101&#x27;</span> ;</span><br></pre></td></tr></table></figure><p>例2：删除自动控制系的所有同学</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> D# <span class="keyword">In</span></span><br><span class="line">(<span class="keyword">Select</span> D# <span class="keyword">From</span> Dept <span class="keyword">Where</span> Dname <span class="operator">=</span> <span class="string">&#x27;自动控制&#x27;</span>);</span><br></pre></td></tr></table></figure><p>例3：删除有四门不及格课程的所有同学</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> Student </span><br><span class="line"><span class="keyword">Where</span> S# <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">Select</span> S#</span><br><span class="line">    <span class="keyword">From</span> SC</span><br><span class="line">    <span class="keyword">Where</span> Score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line">    <span class="keyword">Group</span> <span class="keyword">by</span> S#</span><br><span class="line">    <span class="keyword">Having</span> <span class="built_in">Count</span>(<span class="operator">*</span>)<span class="operator">&gt;=</span> <span class="number">4</span>);</span><br></pre></td></tr></table></figure><h4 id="更改（Update）"><a href="#更改（Update）" class="headerlink" title="更改（Update）"></a>更改（Update）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> 表名</span><br><span class="line"><span class="keyword">Set</span> 列名<span class="operator">=</span> 表达式<span class="operator">|</span> (子查询)</span><br><span class="line">[ [ , 列名<span class="operator">=</span> 表达式<span class="operator">|</span> (子查询) ] … ]</span><br><span class="line">[ <span class="keyword">Where</span> 条件表达式] ;</span><br></pre></td></tr></table></figure><ul><li>如果Where条件省略，则更新所有的元组。</li></ul><p>例1：将所有教师工资上调5%</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> Teacher</span><br><span class="line"><span class="keyword">Set</span> Salary <span class="operator">=</span> Salary <span class="operator">*</span> <span class="number">1.05</span> ;</span><br></pre></td></tr></table></figure><p>例2：将所有计算机系的教师工资上调10%</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> Teacher</span><br><span class="line"><span class="keyword">Set</span> Salary <span class="operator">=</span> Salary <span class="operator">*</span> <span class="number">1.1</span></span><br><span class="line"><span class="keyword">Where</span> D# <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">Select</span> D#</span><br><span class="line">    <span class="keyword">From</span> Dept</span><br><span class="line">    <span class="keyword">Where</span> Dname <span class="operator">=</span> <span class="string">&#x27;计算机&#x27;</span>);</span><br></pre></td></tr></table></figure><p>例4：当某同学001号课的成绩低于该课程平均成绩时，将该同学该门课成绩提高5%</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> SC</span><br><span class="line"><span class="keyword">Set</span> Score <span class="operator">=</span> Score <span class="operator">*</span> <span class="number">1.05</span></span><br><span class="line"><span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span> <span class="keyword">and</span> Score <span class="operator">&lt;</span> <span class="keyword">some</span>(</span><br><span class="line">    <span class="keyword">Select</span> <span class="built_in">AVG</span>(Score)</span><br><span class="line">    <span class="keyword">From</span> SC</span><br><span class="line">    <span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span>) ;</span><br></pre></td></tr></table></figure><p>例5：将张三同学001号课的成绩置为其班级该门课的平均成绩</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> SC</span><br><span class="line"><span class="keyword">Set</span> Score <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">Select</span> <span class="built_in">AVG</span>(SC2.Score)</span><br><span class="line">    <span class="keyword">From</span> SC SC1, Student S1, SC SC2, Student S2</span><br><span class="line">    <span class="keyword">Where</span> S1.Sclass <span class="operator">=</span> S2.Sclass</span><br><span class="line">        <span class="keyword">and</span> SC1.S# <span class="operator">=</span> S1.S#</span><br><span class="line">        <span class="keyword">and</span> SC2.S# <span class="operator">=</span> S2.S#</span><br><span class="line">        <span class="keyword">and</span> S1.Sname<span class="operator">=</span><span class="string">&#x27;张三&#x27;</span></span><br><span class="line">        <span class="keyword">and</span> SC1.C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span></span><br><span class="line">        <span class="keyword">and</span> SC1.C# <span class="operator">=</span> SC2.C#)</span><br><span class="line"><span class="keyword">Where</span> C# <span class="operator">=</span> ‘<span class="number">001</span>’ <span class="keyword">and</span> S# <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">Select</span> S#</span><br><span class="line">    <span class="keyword">From</span> Student</span><br><span class="line">    <span class="keyword">Where</span> Sname <span class="operator">=</span> ‘张三’ );</span><br></pre></td></tr></table></figure><h3 id="5-修正和撤销数据库"><a href="#5-修正和撤销数据库" class="headerlink" title="5. 修正和撤销数据库"></a>5. 修正和撤销数据库</h3><h4 id="修正基本表的定义"><a href="#修正基本表的定义" class="headerlink" title="修正基本表的定义"></a>修正基本表的定义</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tablename</span><br><span class="line">[<span class="keyword">add</span> &#123;colname datatype, …&#125;] 增加新列</span><br><span class="line">[<span class="keyword">drop</span> &#123;完整性约束名&#125;] 删除完整性约束</span><br><span class="line">[modify &#123;colname datatype, …&#125;]</span><br></pre></td></tr></table></figure><p>例1：在学生表Student(S#,Sname,Ssex,Sage,D#,Sclass)基础上增加二列Saddr, PID</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> Student <span class="keyword">Add</span> Saddr <span class="type">char</span>[<span class="number">40</span>], PID <span class="type">char</span>[<span class="number">18</span>] ;</span><br></pre></td></tr></table></figure><p>例2：将上例表中Sname列的数据类型增加两个字符</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> Student Modify Sname <span class="type">char</span>(<span class="number">10</span>) ;</span><br></pre></td></tr></table></figure><p>例3：删除学生姓名必须取唯一值的约束</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> Student <span class="keyword">Drop</span> <span class="keyword">Unique</span>( Sname );</span><br></pre></td></tr></table></figure><h4 id="撤销基本表"><a href="#撤销基本表" class="headerlink" title="撤销基本表"></a>撤销基本表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure><ul><li><code>delete</code>语句只是删除表中的元组，而<code>drop table</code>的操作是撤消包含表格式、表中所有元组、由该表导出的视图等相关的所有内容。</li></ul><h4 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 撤销数据库</span></span><br><span class="line"><span class="keyword">drop</span> database 数据库名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用当前数据库</span></span><br><span class="line">use 数据库名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 关闭当前数据库</span></span><br><span class="line"><span class="keyword">close</span> 数据库名;</span><br></pre></td></tr></table></figure><h2 id="二、复杂查询"><a href="#二、复杂查询" class="headerlink" title="二、复杂查询"></a>二、复杂查询</h2><h3 id="1-（NOT）IN-子查询"><a href="#1-（NOT）IN-子查询" class="headerlink" title="1.（NOT）IN 子查询"></a>1.（NOT）IN 子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表达式 [<span class="keyword">not</span> ] <span class="keyword">in</span> (子查询);</span><br></pre></td></tr></table></figure><p>例1：列出张三、王三同学的所有信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">in</span> (“张三”, “王三”);</span><br></pre></td></tr></table></figure><p>例2：列出选修了001号课程的学生的学号和姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#, Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> S# <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">Select</span> S#</span><br><span class="line">    <span class="keyword">From</span> SC</span><br><span class="line">    <span class="keyword">Where</span> C# <span class="operator">=</span> ‘<span class="number">001</span>’ );</span><br></pre></td></tr></table></figure><p>例3：求既学过001号课程，又学过002号课程的学生的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span></span><br><span class="line">    <span class="keyword">and</span> S# <span class="keyword">in</span> (</span><br><span class="line">            <span class="keyword">Select</span> S# </span><br><span class="line">            <span class="keyword">From</span> SC</span><br><span class="line">            <span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;002&#x27;</span>) ;</span><br></pre></td></tr></table></figure><p>例4：列出没学过李明老师讲授课程的所有同学的姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> S# <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line">            <span class="keyword">Select</span> S#</span><br><span class="line">            <span class="keyword">From</span> SC, Course C, Teacher T</span><br><span class="line">            <span class="keyword">Where</span> T.Tname <span class="operator">=</span> <span class="string">&#x27;李明&#x27;</span> </span><br><span class="line">                <span class="keyword">and</span> SC.C# <span class="operator">=</span> C.C#</span><br><span class="line">                <span class="keyword">and</span> T.T# <span class="operator">=</span> C.T# );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 错误写法</span></span><br><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student S, SC, Course C, Teacher T</span><br><span class="line"><span class="keyword">Where</span> T.Tname <span class="operator">&lt;&gt;</span> <span class="string">&#x27;李明&#x27;</span></span><br><span class="line">    <span class="keyword">and</span> C.C# <span class="operator">=</span> SC.C#</span><br><span class="line">    <span class="keyword">and</span> SC.S# <span class="operator">=</span> S.S#</span><br><span class="line">    <span class="keyword">and</span> T.T# <span class="operator">=</span> C.T#;</span><br></pre></td></tr></table></figure><ul><li>非相关子查询：内层查询独立进行，没有涉及任何外层查询相关信息的子查询。</li><li>相关子查询：内层查询需要依靠外层查询的某些参量作为限定条件才能进行的子查询<ul><li>外层向内层传递的参量需要使用外层的表名或表别名来限定</li></ul></li></ul><p>例5：求学过001号课程的同学的姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student Stud</span><br><span class="line"><span class="keyword">Where</span> S# <span class="keyword">in</span> (</span><br><span class="line">        <span class="keyword">Select</span> S#</span><br><span class="line">        <span class="keyword">From</span> SC</span><br><span class="line">        <span class="keyword">Where</span> S# <span class="operator">=</span> Stud.S# <span class="keyword">and</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="2-θ-Some与-θ-All子查询"><a href="#2-θ-Some与-θ-All子查询" class="headerlink" title="2. θ-Some与 θ-All子查询"></a>2. θ-Some与 θ-All子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">表达式 θ <span class="keyword">some</span> (子查询)</span><br><span class="line">表达式 θ <span class="keyword">all</span> (子查询)</span><br></pre></td></tr></table></figure><ul><li>θ 是比较运算符： &lt; , &gt; , &gt;&#x3D; , &lt;&#x3D; , &#x3D; , &lt;&gt;。</li><li>如果表达式的值至少与子查询结果的某一个值相比较满足 θ 关系，则<code>表达式 θ some (子查询)</code>的结果便为真；</li><li>如果表达式的值与子查询结果的所有值相比较都满足 θ 关系，则<code>表达式 θ all (子查询)</code>的结果便为真。</li></ul><p>例1：找出工资最低的教师姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Tname</span><br><span class="line"><span class="keyword">From</span> Teacher</span><br><span class="line"><span class="keyword">Where</span> Salary <span class="operator">&lt;=</span> <span class="keyword">all</span> (</span><br><span class="line">                <span class="keyword">Select</span> Salary</span><br><span class="line">                <span class="keyword">From</span> Teacher);</span><br></pre></td></tr></table></figure><p>例2：找出001号课成绩不是最高的所有学生的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span></span><br><span class="line">        <span class="keyword">and</span> Score <span class="operator">&lt;</span> <span class="keyword">some</span> (</span><br><span class="line">                    <span class="keyword">Select</span> Score</span><br><span class="line">                    <span class="keyword">From</span> SC</span><br><span class="line">                    <span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span>);</span><br></pre></td></tr></table></figure><p>例3：找出所有课程都不及格的学生姓名(相关子查询)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> <span class="number">60</span> <span class="operator">&gt;</span> <span class="keyword">all</span> (</span><br><span class="line">            <span class="keyword">Select</span> Score</span><br><span class="line">            <span class="keyword">From</span> SC</span><br><span class="line">            <span class="keyword">Where</span> S# <span class="operator">=</span> Student.S#);</span><br></pre></td></tr></table></figure><p>例4：找出001号课成绩最高的所有学生的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span></span><br><span class="line">    <span class="keyword">and</span> Score <span class="operator">&gt;=</span> <span class="keyword">all</span> (</span><br><span class="line">                <span class="keyword">Select</span> Score</span><br><span class="line">                <span class="keyword">From</span> SC </span><br><span class="line">                <span class="keyword">Where</span> C# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span>);</span><br></pre></td></tr></table></figure><p>例5：找出98030101号同学成绩最低的课程号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> S# <span class="operator">=</span> <span class="string">&#x27;98030101&#x27;</span></span><br><span class="line">    <span class="keyword">and</span> Score <span class="operator">&lt;=</span> <span class="keyword">all</span> (</span><br><span class="line">                <span class="keyword">Select</span> Score</span><br><span class="line">                <span class="keyword">From</span> SC</span><br><span class="line">                <span class="keyword">Where</span> S# <span class="operator">=</span> <span class="string">&#x27;98030101&#x27;</span>);</span><br></pre></td></tr></table></figure><p>例6：找出张三同学成绩最低的课程号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C# <span class="keyword">From</span> SC, Student S</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">    <span class="keyword">and</span> S.S#<span class="operator">=</span>SC.S#</span><br><span class="line">    <span class="keyword">and</span> Score <span class="operator">&lt;=</span> <span class="keyword">all</span> (</span><br><span class="line">                <span class="keyword">Select</span> Score</span><br><span class="line">                <span class="keyword">From</span> SC</span><br><span class="line">                <span class="keyword">Where</span> S#<span class="operator">=</span>S.S# );</span><br></pre></td></tr></table></figure><h4 id="等价关系"><a href="#等价关系" class="headerlink" title="等价关系"></a>等价关系</h4><ul><li><code>表达式 in (子查询)</code>等价于<code>表达式 = some (子查询)</code>；</li><li><code>表达式 not in (子查询)</code>等价于<code>表达式 &lt;&gt; all (子查询)</code>，**而不是<code>表达式 &lt;&gt; some (子查询)</code>**。</li></ul><h3 id="3-（NOT）EXISTS-子查询"><a href="#3-（NOT）EXISTS-子查询" class="headerlink" title="3.（NOT）EXISTS 子查询"></a>3.（NOT）EXISTS 子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">not</span>] <span class="keyword">Exists</span> (子查询);</span><br></pre></td></tr></table></figure><ul><li>语义：子查询结果中有无元组存在。</li><li>不加<code>not</code>形式的<code>Exists</code>谓词可以不用。</li></ul><p>例1：检索学过001号教师主讲的所有课程的所有同学的姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> ( <span class="comment">-- 不存在</span></span><br><span class="line">        <span class="keyword">Select</span> <span class="operator">*</span> <span class="comment">-- 有一门001教师主讲课程</span></span><br><span class="line">        <span class="keyword">From</span> Course </span><br><span class="line">        <span class="keyword">Where</span> Course.T# <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span> </span><br><span class="line">            <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> ( <span class="comment">-- 该同学没学过</span></span><br><span class="line">                    <span class="keyword">Select</span> <span class="operator">*</span></span><br><span class="line">                    <span class="keyword">From</span> SC</span><br><span class="line">                    <span class="keyword">Where</span> S# <span class="operator">=</span> Student.S#</span><br><span class="line">                        <span class="keyword">and</span> C# <span class="operator">=</span> Course.C#));</span><br></pre></td></tr></table></figure><p>例2：列出没学过李明老师讲授任何一门课程的所有同学的姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">        <span class="keyword">Select</span> <span class="operator">*</span></span><br><span class="line">        <span class="keyword">From</span> Course, SC, Teacher</span><br><span class="line">        <span class="keyword">Where</span> Tname <span class="operator">=</span> <span class="string">&#x27;李明&#x27;</span></span><br><span class="line">            <span class="keyword">and</span> Course.T# <span class="operator">=</span> Teacher.T#</span><br><span class="line">            <span class="keyword">and</span> Course.C# <span class="operator">=</span> SC.C#</span><br><span class="line">            <span class="keyword">and</span> S# <span class="operator">=</span> Student.S# );</span><br></pre></td></tr></table></figure><p>例3：列出至少学过98030101号同学学过所有课程的同学的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> DISTINC S#</span><br><span class="line"><span class="keyword">From</span> SC SC1</span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">        <span class="keyword">Select</span> <span class="operator">*</span></span><br><span class="line">        <span class="keyword">From</span> SC SC2</span><br><span class="line">        <span class="keyword">Where</span> SC2.S# <span class="operator">=</span> <span class="string">&#x27;98030101&#x27;</span></span><br><span class="line">            <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">                    <span class="keyword">Select</span> <span class="operator">*</span></span><br><span class="line">                    <span class="keyword">From</span> SC</span><br><span class="line">                    <span class="keyword">Where</span> C# <span class="operator">=</span> SC2.C#</span><br><span class="line">                        <span class="keyword">and</span> S# <span class="operator">=</span> SC1.S#));</span><br></pre></td></tr></table></figure><p>例4：已知SPJ(Sno, Pno, Jno, Qty), 其中Sno供应商号，Pno零件号，Jno工程号，Qty数量，列出至少用了供应商S1供应的全部零件的工程号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="keyword">DISTINCT</span> Jno</span><br><span class="line"><span class="keyword">From</span> SPJ SPJ1</span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">        <span class="keyword">Select</span> <span class="operator">*</span></span><br><span class="line">        <span class="keyword">From</span> SPJ SPJ2</span><br><span class="line">        <span class="keyword">Where</span> SPJ2.Sno <span class="operator">=</span> <span class="string">&#x27;S1&#x27;</span></span><br><span class="line">            <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">                    <span class="keyword">Select</span> <span class="operator">*</span></span><br><span class="line">                    <span class="keyword">From</span> SPJ SPJ3</span><br><span class="line">                    <span class="keyword">Where</span> SPJ3.Pno <span class="operator">=</span> SPJ2.Pno</span><br><span class="line">                        <span class="keyword">and</span> SPJ3.Jno <span class="operator">=</span> SPJ1.Jno ) );</span><br></pre></td></tr></table></figure><h3 id="4-结果计算"><a href="#4-结果计算" class="headerlink" title="4. 结果计算"></a>4. 结果计算</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> 列名 <span class="operator">|</span> expr <span class="operator">|</span> agfunc(列名) [[, 列名 <span class="operator">|</span> expr <span class="operator">|</span> agfunc(列名) ] … ]</span><br><span class="line"><span class="keyword">From</span> 表名<span class="number">1</span> [, 表名<span class="number">2</span> … ]</span><br><span class="line">[ <span class="keyword">Where</span> 检索条件 ] ;</span><br></pre></td></tr></table></figure><ul><li>expr 可以是常量、列名、或由常量、列名、特殊函数及算术运算符构成的算术运算式。</li><li>agfunc()是一些聚集函数。</li></ul><p>例1：求有差额(差额&gt;0)的任意两位教师的薪水差额</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> T1.Tname <span class="keyword">as</span> TR1, T2.Tname <span class="keyword">as</span> TR2, T1.Salary – T2.Salary</span><br><span class="line"><span class="keyword">From</span> Teacher T1, Teacher T2</span><br><span class="line"><span class="keyword">Where</span> T1.Salary <span class="operator">&gt;</span> T2.Salary;</span><br></pre></td></tr></table></figure><p>例2：依据学生年龄求学生的出生年份，当前是2022年</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S.S#, S.Sname, <span class="number">2022</span> – S.Sage<span class="operator">+</span><span class="number">1</span> <span class="keyword">as</span> Syear</span><br><span class="line"><span class="keyword">From</span> Student S;</span><br></pre></td></tr></table></figure><h4 id="聚集计算"><a href="#聚集计算" class="headerlink" title="聚集计算"></a>聚集计算</h4><p>SQL提供了五个作用在简单列值集合上的内置聚集函数agfunc,分别是：COUNT、SUM、AVG、MAX、MIN。</p><ul><li>聚集函数是不允许用于Where子句中的：<br>Where子句是对每一元组进行条件过滤，而不是对集合进行条件过滤</li></ul><p>例1：求教师的工资总额</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="built_in">Sum</span>(Salary) <span class="keyword">From</span> Teacher;</span><br></pre></td></tr></table></figure><p>例2：求计算机系教师的工资总额</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="built_in">Sum</span>(Salary) <span class="keyword">From</span> Teacher T, Dept</span><br><span class="line"><span class="keyword">Where</span> Dept.Dname <span class="operator">=</span> <span class="string">&#x27;计算机&#x27;</span> <span class="keyword">and</span> Dept.D# <span class="operator">=</span> T.D#;</span><br></pre></td></tr></table></figure><p>例3：求数据库课程的平均成绩</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="built_in">AVG</span>(Score) <span class="keyword">From</span> Course C, SC</span><br><span class="line"><span class="keyword">Where</span> C.Cname <span class="operator">=</span> <span class="string">&#x27;数据库&#x27;</span> <span class="keyword">and</span> C.C# <span class="operator">=</span> SC.C#;</span><br></pre></td></tr></table></figure><h3 id="5-分组查询"><a href="#5-分组查询" class="headerlink" title="5. 分组查询"></a>5. 分组查询</h3><p>SQL可以将检索到的元组按照某一条件进行分类，具有相同条件值的元组划到一个组或一个集合中，同时处理多个组或集合的聚集运算。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> 列名 <span class="operator">|</span> expr <span class="operator">|</span> agfunc(列名) [[, 列名 <span class="operator">|</span> expr <span class="operator">|</span> agfunc(列名) ] … ]</span><br><span class="line"><span class="keyword">From</span> 表名<span class="number">1</span> [, 表名<span class="number">2</span> … ]</span><br><span class="line">[ <span class="keyword">Where</span> 检索条件 ]</span><br><span class="line">[ <span class="keyword">Group</span> <span class="keyword">by</span> 分组条件 ];</span><br></pre></td></tr></table></figure><ul><li>分组条件可以是<code>列名1, 列名2, ...</code></li></ul><p>例1：求每一个学生的平均成绩</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#, <span class="built_in">AVG</span>(Score) <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S#;</span><br></pre></td></tr></table></figure><p>例2：求每一门课程的平均成绩</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C#, <span class="built_in">AVG</span>(Score) <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> C#;</span><br></pre></td></tr></table></figure><h4 id="分组过滤"><a href="#分组过滤" class="headerlink" title="分组过滤"></a>分组过滤</h4><p>若要对集合(即分组)进行条件过滤，即满足条件的集合&#x2F;分组留下，不满足条件的集合&#x2F;分组剔除。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> 列名 <span class="operator">|</span> expr <span class="operator">|</span> agfunc(列名) [[, 列名 <span class="operator">|</span> expr <span class="operator">|</span> agfunc(列名) ] … ]</span><br><span class="line"><span class="keyword">From</span> 表名<span class="number">1</span> [, 表名<span class="number">2</span> … ]</span><br><span class="line">[ <span class="keyword">Where</span> 检索条件 ]</span><br><span class="line">[ <span class="keyword">Group</span> <span class="keyword">by</span> 分组条件 [ <span class="keyword">Having</span> 分组过滤条件] ] ;</span><br></pre></td></tr></table></figure><ul><li>没有Group by子句，便不能有Having子句。</li></ul><p>例1：求不及格课程超过两门的同学的学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> Score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S#</span><br><span class="line"><span class="keyword">Having</span> <span class="built_in">Count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>例2：求有10人以上不及格的课程号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C#</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> Score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> C#</span><br><span class="line"><span class="keyword">Having</span> <span class="built_in">Count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">10</span>;</span><br></pre></td></tr></table></figure><p>例3：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S#, <span class="built_in">Avg</span>(Score)</span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> S# <span class="keyword">in</span> (</span><br><span class="line">        <span class="keyword">Select</span> S#</span><br><span class="line">        <span class="keyword">From</span> SC</span><br><span class="line">        <span class="keyword">Where</span> Score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line">        <span class="keyword">Group</span> <span class="keyword">by</span> S#</span><br><span class="line">        <span class="keyword">Having</span> <span class="built_in">Count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">2</span>)</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S#;</span><br></pre></td></tr></table></figure><h3 id="6-关系代数操作"><a href="#6-关系代数操作" class="headerlink" title="6. 关系代数操作"></a>6. 关系代数操作</h3>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis 基础表达式语法</title>
      <link href="/2022/07/26/Mybatis%E5%9F%BA%E7%A1%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95/"/>
      <url>/2022/07/26/Mybatis%E5%9F%BA%E7%A1%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="语句映射"><a href="#语句映射" class="headerlink" title="语句映射"></a>语句映射</h2><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>select 拥有很多属性，以下是常用属性：</p><ul><li>id：命名空间中唯一标识符，可用于被引用。</li><li>parameterType：将会传入这条语句的参数的类全限定名或别名。这个属性是可选的，因为 MyBatis 可以通过类型处理器（TypeHandler）推断出具体传入语句的参数，默认为未设置（unset）。</li><li>resultType：期望从这条语句中返回结果的类全限定名或别名。 如果返回集合，那么应设置为集合中元素的类型。 resultType 和 resultMap 之间只能选用一个。</li><li>flushCache：如果开启，那么语句被调用时会清空本地缓存和二级缓存。默认为 false。</li><li>useCache：如果开启，那么语句调用后返回的结果会缓存存到二级缓存，默认为 true。</li><li>timeout：在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为未设置（unset）（依赖数据库驱动）。</li></ul><p>查询某个人的信息：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPerson&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;hashmap&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM person WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="insert-update-delete"><a href="#insert-update-delete" class="headerlink" title="insert, update, delete"></a>insert, update, delete</h3><p>示例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span>&gt;</span></span><br><span class="line">  insert into Author (id,username,password,email,bio)</span><br><span class="line">  values (#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;bio&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateAuthor&quot;</span>&gt;</span></span><br><span class="line">  update Author set</span><br><span class="line">    username = #&#123;username&#125;,</span><br><span class="line">    password = #&#123;password&#125;,</span><br><span class="line">    email = #&#123;email&#125;,</span><br><span class="line">    bio = #&#123;bio&#125;</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteAuthor&quot;</span>&gt;</span></span><br><span class="line">  delete from Author where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="插入后获得生成的主键"><a href="#插入后获得生成的主键" class="headerlink" title="插入后获得生成的主键"></a>插入后获得生成的主键</h4><p>如果数据库支持自动生成主键的字段，那么可以设置 <code>useGeneratedKeys=&quot;true&quot;</code>，然后再把 <code>keyProperty</code> 设置为目标属性。<br>例如，如果上面的 Author 表已经在 id 列上使用了自动生成，那么语句可以修改为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">  insert into Author (username,password,email,bio)</span><br><span class="line">  values (#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;bio&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果数据库支持多行插入，也可以返回自动生成的主键：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">  insert into Author (username, password, email, bio) values</span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">    (#&#123;item.username&#125;, #&#123;item.password&#125;, #&#123;item.email&#125;, #&#123;item.bio&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="动态SQL"><a href="#动态SQL" class="headerlink" title="动态SQL"></a>动态SQL</h2><p>MyBatis 3 基于 OGNL 的表达式编写动态 SQL。</p><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p><code>if</code>代表根据条件拼接语句。</p><p>例如，根据标题和作者名查找活跃状态的博客，当<code>test</code>为真就会拼接对应<code>if</code>元素里的语句：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE state = &#x27;ACTIVE&#x27;</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">    AND title like #&#123;title&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">    AND author_name like #&#123;author.name&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="choose-when-otherwise"><a href="#choose-when-otherwise" class="headerlink" title="choose, when, otherwise"></a>choose, when, otherwise</h3><p><code>choose</code>元素代表从多个条件中选择一个使用。</p><p>例如，根据标题查找活跃状态的博客，如果标题为空那么根据作者名查找，如果都为空，那么查找精选的博客：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE state = &#x27;ACTIVE&#x27;</span><br><span class="line">  <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      AND title like #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">      AND author_name like #&#123;author.name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">      AND featured = 1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="trim、where、set"><a href="#trim、where、set" class="headerlink" title="trim、where、set"></a>trim、where、set</h3><p><code>where</code>元素只会在<strong>子元素返回任何内容</strong>的情况下才插入 WHERE 子句。若子句以<code>AND</code>或<code>OR</code>开头，<code>where</code>元素也会去除它。</p><p><code>set</code>元素可以用于动态包含需要更新的列，并删掉额外的逗号。</p><p>例如，更新作者信息：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateAuthorIfNecessary&quot;</span>&gt;</span></span><br><span class="line">  update Author</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span>username=#&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span>password=#&#123;password&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span>email=#&#123;email&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bio != null&quot;</span>&gt;</span>bio=#&#123;bio&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>trim</code>元素用来“修剪”拼接的语句。它有如下属性：</p><ul><li>prefix：加上前缀</li><li>suffix：加上后缀</li><li>preffixOverrides：去除指定的前缀</li><li>suffixOverrides：去除指定的后缀</li></ul><p>例如，和<code>where</code>元素等价的自定义<code>trim</code>元素为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;WHERE&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;AND |OR &quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br></pre></td></tr></table></figure><p>例如，和<code>set</code>元素等价的自定义<code>trim</code>元素为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;SET&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br></pre></td></tr></table></figure><p>例如，向班级信息表中插入非空数据：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.morning.all.entity.ClassInfo&quot;</span>&gt;</span></span><br><span class="line">        INSERT INTO tb_class</span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;className != null&quot;</span>&gt;</span></span><br><span class="line">                class_name,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;classAddress != null&quot;</span>&gt;</span></span><br><span class="line">                class_address,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">        VALUES</span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;className != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;className, jdbcType=VARCHAR&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;classAddress != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;classAddress, jdbcType=VARCHAR&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><p><code>foreach</code>元素用于对集合进行遍历，常用于构建<code>in</code>条件语句或者批量操作语句。它有如下属性：</p><ul><li>collection：迭代集合的名称，比如<code>list</code>，<code>array</code>，<code>set</code>，也可用<code>@Param</code>注解指定名称；</li><li>item：本次迭代获取的元素，若<code>collection</code>为<code>map</code>，则代表键值对的值；</li><li>open：语句拼接的前缀；</li><li>close：语句拼接的后缀；</li><li>separator：每次迭代后给 sql 语句附加上的指定的字符，并且不会错误添加多余的分隔符；</li><li>index：本次迭代获取的元素的序号，若<code>collection</code>为<code>map</code>，则代表键值对的键。</li></ul><p>例如，遍历指定 ID 集合对应的发布文章：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPostIn&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Post&quot;</span>&gt;</span></span><br><span class="line">  SELECT *</span><br><span class="line">  FROM post</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">open</span>=<span class="string">&quot;id IN (&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">nullable</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">          #&#123;item&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>例如，批量插入用户信息：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUsers&quot;</span>&gt;</span></span><br><span class="line">  INSERT INTO t_user(username,age,score)</span><br><span class="line">  VALUES</span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;users&quot;</span> <span class="attr">item</span>=<span class="string">&quot;user&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">    (#&#123;user.username&#125;, #&#123;user.age&#125;, #&#123;user.score&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="嵌套结果映射"><a href="#嵌套结果映射" class="headerlink" title="嵌套结果映射"></a>嵌套结果映射</h2><h3 id="联表查询"><a href="#联表查询" class="headerlink" title="联表查询"></a>联表查询</h3><h4 id="集合的嵌套结果映射（一对多）"><a href="#集合的嵌套结果映射（一对多）" class="headerlink" title="集合的嵌套结果映射（一对多）"></a>集合的嵌套结果映射（一对多）</h4><p>一个博客可以对应多个文章：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  B.id as blog_id,</span><br><span class="line">  B.title as blog_title,</span><br><span class="line">  B.author_id as blog_author_id,</span><br><span class="line">  P.id as post_id,</span><br><span class="line">  P.subject as post_subject,</span><br><span class="line">  P.body as post_body,</span><br><span class="line">  from Blog B</span><br><span class="line">  left outer join Post P on B.id = P.blog_id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_subject&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;body&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_body&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>将上面的结果映射改成可重用的等价形式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogPostResult&quot;</span> <span class="attr">columnPrefix</span>=<span class="string">&quot;post_&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogPostResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Post&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;subject&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;body&quot;</span> <span class="attr">column</span>=<span class="string">&quot;body&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="关联的嵌套结果映射（多对一或一对一）"><a href="#关联的嵌套结果映射（多对一或一对一）" class="headerlink" title="关联的嵌套结果映射（多对一或一对一）"></a>关联的嵌套结果映射（多对一或一对一）</h4><p>一个博客对应一个作者：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    B.id            as blog_id,</span><br><span class="line">    B.title         as blog_title,</span><br><span class="line">    B.author_id     as blog_author_id,</span><br><span class="line">    A.id            as author_id,</span><br><span class="line">    A.username      as author_username,</span><br><span class="line">    A.password      as author_password,</span><br><span class="line">    A.email         as author_email,</span><br><span class="line">    A.bio           as author_bio</span><br><span class="line">  from Blog B left outer join Author A on B.author_id = A.id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_author_id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Author&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;authorResult&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;authorResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_id&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_username&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_password&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_email&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_bio&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="分步查询"><a href="#分步查询" class="headerlink" title="分步查询"></a>分步查询</h3><p>分步查询在大型数据集或大型数据表上表现不佳。这个问题被称为“N+1 查询问题”。 概括地讲，N+1 查询问题是这样子的：</p><ul><li>你执行了一个单独的 SQL 语句来获取结果的一个列表（就是“+1”）。</li><li>对列表返回的每条记录，你执行一个 select 查询语句来为每条记录加载详细信息（就是“N”）。</li></ul><p>这个问题会导致成百上千的 SQL 语句被执行。有时候，我们不希望产生这样的后果。</p><p>好消息是，MyBatis 能够对这样的查询进行延迟加载，因此可以将大量语句同时运行的开销分散开来。 然而，如果你加载记录列表之后立刻就遍历列表以获取嵌套的数据，就会触发所有的延迟加载查询，性能可能会变得很糟糕。</p><h4 id="集合的嵌套结果映射（一对多）-1"><a href="#集合的嵌套结果映射（一对多）-1" class="headerlink" title="集合的嵌套结果映射（一对多）"></a>集合的嵌套结果映射（一对多）</h4><p>一个商品可以对应多个商品详情，在商品实体类中有一个商品详情的集合字段，结果映射如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;rmGoods1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Goods&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 映射goods对象的主键到goods_id字段 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;goods_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;goodsId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        collection的含义是,在</span></span><br><span class="line"><span class="comment">        select * from t_goods limit 0,1 得到结果后,对所有Goods对象遍历得到goods_id字段值,</span></span><br><span class="line"><span class="comment">        并代入到goodsDetail命名空间的findByGoodsId的SQL中执行查询,</span></span><br><span class="line"><span class="comment">        将得到的&quot;商品详情&quot;集合赋值给goodsDetails List对象.</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;goodsDetails&quot;</span> <span class="attr">select</span>=<span class="string">&quot;goodsDetail.selectByGoodsId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;goods_id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectOneToMany&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;rmGoods1&quot;</span>&gt;</span></span><br><span class="line">    select * from t_goods limit 0,10</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="关联的嵌套结果映射（多对一或一对一）-1"><a href="#关联的嵌套结果映射（多对一或一对一）-1" class="headerlink" title="关联的嵌套结果映射（多对一或一对一）"></a>关联的嵌套结果映射（多对一或一对一）</h4><p>商品详情对应一个商品，在商品详情实体类中有一个商品ID字段，结果映射如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;rmGoodsDetail&quot;</span> <span class="attr">type</span>=<span class="string">&quot;GoodsDetail&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;gd_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gdId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;goods_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;goodsId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;goods&quot;</span> <span class="attr">select</span>=<span class="string">&quot;goods.selectById&quot;</span> <span class="attr">column</span>=<span class="string">&quot;goods_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectManyToOne&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;rmGoodsDetail&quot;</span>&gt;</span></span><br><span class="line">    select * from t_goods_detail limit 0,20</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记，MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git 学习笔记</title>
      <link href="/2022/04/29/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/04/29/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="一、准备"><a href="#一、准备" class="headerlink" title="一、准备"></a>一、准备</h2><p>学习材料：<br><a href="https://git-scm.com/book/zh/v2">官方中文书《Pro Git 第二版》</a><br><a href="https://learngitbranching.js.org/?locale=zh_CN">在线可视化交互式学习Git分支操作</a><br><a href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰的Git教程</a></p><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h3><p>Git 是一种主流的分布式的版本控制系统（version control system, or VCS）。</p><p>版本控制系统是指记录文件内容变化以便查阅特定版本修订情况的系统，它能够将文件甚至整个项目回退到特定版本。</p><p>分布式是指系统允许同一项目由不同环境下的开发者协同工作；如果某处用于协同工作的服务器发生故障，可以用其他镜像出来的本地仓库恢复。</p><p>主流是因为 Git 开源免费，速度快，功能强大，能高效管理超大规模的项目，完全支持大量并行分支下的多人开发模式。</p><h3 id="2-基础概念"><a href="#2-基础概念" class="headerlink" title="2. 基础概念"></a>2. 基础概念</h3><h4 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h4><ul><li><p>记录快照：每次提交更新或保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引；Git 不再重新存储没有改动的文件，而是保留指向已存储的文件的链接。</p></li><li><p>几乎本地执行：绝大多数操作都只需要访问本地文件和资源，一般不需要来自网络上其它计算机的信息。</p></li><li><p>保证完整性：Git 在存储前计算所有数据的校验和，然后以校验和来引用。这意味着不可能在 Git 不知情时更改任何文件内容或目录内容。</p></li><li><p>一般只添加数据：Git 操作几乎只往 Git 数据库中增加数据。一旦你提交快照到 Git 中，就难以再丢失数据。</p></li></ul><h4 id="工作区域"><a href="#工作区域" class="headerlink" title="工作区域"></a>工作区域</h4><p>仓库（repository, or .git）存放项目的元数据以及对象数据库。<strong>仓库是 Git 的核心</strong>。克隆仓库就是克隆<code>.git</code>目录。</p><p>工作目录（working directory）存放从仓库的压缩数据库中拷贝出来的某个版本的项目文件，放在外存以供使用或修改。</p><p>暂存区域（staging area, or index）是一个文件，保存了下次将提交的文件列表信息，一般在仓库中。</p><h4 id="文件状态"><a href="#文件状态" class="headerlink" title="文件状态"></a>文件状态</h4><p>Git 中的文件分三种基本的状态：</p><ul><li>已提交（committed）：该文件已保存在本地数据库中。</li><li>已修改（modified）：该文件已被修改，但未保存到数据库中。</li><li>已暂存（staged）：该文件已被修改且被标记，使之包含在下次提交的快照中。</li></ul><p>如果 Git 目录中保存着特定版本的文件，就属于已提交状态；<br>如果作了修改并已放入暂存区域，就属于已暂存状态；<br>如果自上次取出后，作了修改但还没有放到暂存区域，就是已修改状态。</p><p><strong>注</strong>：在项目目录下但不在 Git 中的文件属于未跟踪状态（untracked）；在分支合并时起冲突的文件会被标记成未合并状态（unmerged）。</p><h3 id="3-分支模型"><a href="#3-分支模型" class="headerlink" title="3. 分支模型"></a>3. 分支模型</h3><h4 id="分支简介"><a href="#分支简介" class="headerlink" title="分支简介"></a>分支简介</h4><p>暂存操作（git add）会先为每一个文件用哈希算法计算校验和，再把当前版本的文件快照保存为 blob 对象放到仓库，最后把校验和加入到暂存区域等待提交。</p><p>提交操作（git commit）会先计算每一个子目录的校验和，再把校验和保存为 tree 对象放到仓库。<br>然后，Git 创建一个<strong>提交对象</strong>（commit object），它包含：</p><ul><li>指向 blob 对象的指针；</li><li>指向 tree 对象的指针；</li><li>指向父对象的指针；</li><li>作者姓名和邮箱地址；</li><li>提交时的注释信息。</li></ul><p><strong>Git 的分支，其实本质上就是指向提交对象的可变指针</strong>。从存储的角度来说就是一个包含所指对象校验和的文件。</p><p>创建仓库的操作（git init）会默认设置一个分支，代表主分支，一般名为<code>master</code>或<code>main</code>。<br>创建分支的操作也仅仅是增加了一个可以移动的指针。</p><p>Git 中有一个特殊指针<code>HEAD</code>，用于指向当前所在的分支。<br>每次提交时<code>HEAD</code>会自动移动以指向最新的提交对象。<br>切换分支的操作就是切换<code>HEAD</code>的指向，同时<strong>会改变工作目录中的文件</strong>以还原切换后的分支最后一次提交后的状态。</p><h4 id="分支合并"><a href="#分支合并" class="headerlink" title="分支合并"></a>分支合并</h4><p>在项目中为了修复某个 bug 或者增加某个功能，开发者往往要新建一个对应的分支，然后在该分支上工作，编码完成和测试无误后再回到主分支以合并该分支。至此主分支包含了该分支的工作，所以可以删除该分支。</p><p>一次合并一般要用到三个快照：</p><ul><li>当前分支末端所指的快照；</li><li>待合并分支末端所指的快照；</li><li>两个分支的公共祖先所指的快照。</li></ul><p>一般地。三方合并后会创建一个新的快照并且自动创建一个新的提交指向它。因此三方合并会使得当前分支指针指向两个父提交对象。<br>特殊地，如果两个分支互相“平行”，即顺着当前分支走下去能到达待合并的分支，那么合并时会把指针直接向前快速推进（fast-forward）。</p><h5 id="遇到冲突的分支合并"><a href="#遇到冲突的分支合并" class="headerlink" title="遇到冲突的分支合并"></a>遇到冲突的分支合并</h5><p>如果在两个不同的分支中对同一文件的同一部分进行了不同修改，Git 做了合并但不会自动创建一个新的合并提交。Git 会报告冲突并等待手动解决。<br>Git 会在有冲突的文件中加入标准的冲突解决标记，这样你可以打开这些包含冲突的文件然后手动解决冲突。</p><h3 id="4-远程仓库"><a href="#4-远程仓库" class="headerlink" title="4. 远程仓库"></a>4. 远程仓库</h3><p>远程仓库是指托管在网络中的项目的版本库。<br>特殊地，远程仓库也可以设置在本地主机上，“远程”只是代表在别的地方。</p><p>当你克隆（git clone）了一个远程仓库，Git 会默认给该远程仓库所在服务器命名为<code>origin</code>。</p><p>抓取操作（git fetch）会尝试从目标远程仓库中下载本地仓库还没有的数据；<br>拉取操作（git pull）会抓取数据后并自动尝试合并到当前的分支；<br>推送操作（git push）会尝试向目标远程仓库上传本地更新的数据；</p><p><strong>抓取不会自动合并或修改当前的工作</strong>；<br><strong>推送在对远程仓库有写权限且抓取并合并远程仓库后才生效</strong>；<br><strong>拉取和推送都需要本地的分支设置了跟踪远程分支</strong>。</p><h4 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h4><p>远程跟踪分支是对远程分支状态的引用。在每一次抓取远程数据后，远程跟踪分支会自动移动以同步远程仓库的状态。</p><h4 id="变基"><a href="#变基" class="headerlink" title="变基"></a>变基</h4><h3 id="5-安装"><a href="#5-安装" class="headerlink" title="5. 安装"></a>5. 安装</h3><ul><li><a href="https://git-scm.com/downloads">二进制文件</a></li><li><a href="https://mirrors.edge.kernel.org/pub/software/scm/git/">源码</a></li></ul><p>注：对于 CentOS 7，yum 安装的 Git 版本较低，如果需要升级需要下载新版的源码编译安装；对于学生用的云服务器，编译过程可能会出现内存不足，需要自行设置系统的交换分区。</p><p>因为每次提交都需要用户名和邮箱地址，所以安装后必须设置用户名和邮箱。</p><h2 id="二、基础"><a href="#二、基础" class="headerlink" title="二、基础"></a>二、基础</h2><p><a href="https://liaoxuefeng.gitee.io/resource.liaoxuefeng.com/git/git-cheat-sheet.pdf">Git 速查表</a></p><p>注：新版 Git 支持一些新的命令，比如<code>git restore</code>来分担一名多用的<code>git checkout</code>。<br>$$a_1 \cdot \frac{1-q^n}{1-q}$$</p>]]></content>
      
      
      
        <tags>
            
            <tag> 【笔记，Git, 版本控制】 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于学习</title>
      <link href="/2022/04/26/%E5%85%B3%E4%BA%8E%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%8E%9F%E5%88%99%E4%B8%8E%E6%96%B9%E6%B3%95/"/>
      <url>/2022/04/26/%E5%85%B3%E4%BA%8E%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%8E%9F%E5%88%99%E4%B8%8E%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="学习的原则"><a href="#学习的原则" class="headerlink" title="学习的原则"></a>学习的原则</h2><ul><li>控制速度</li><li>经常学习</li><li>广泛学习</li></ul><h2 id="学习的原理"><a href="#学习的原理" class="headerlink" title="学习的原理"></a>学习的原理</h2><ul><li>学习是对知识的输入、加工、储备和输出的过程；</li><li>人获取信息主要靠视觉；<ul><li>大脑擅长捕捉图像信息；</li><li>眼跳（Saccade）、眼停（Fixation）和回视（Regression）会限制人的阅读速度；</li></ul></li></ul><h2 id="学习的方法"><a href="#学习的方法" class="headerlink" title="学习的方法"></a>学习的方法</h2><h3 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h3><ul><li>阅读的原则<ul><li>阅读的范围：广泛阅读</li><li>阅读的频率：经常阅读</li><li>阅读的速度：限时阅读</li><li>内容的难度：适度阅读</li><li>内容的优先级：侧重阅读</li><li>内容的属性：标记阅读</li></ul></li><li><strong>阅读的流程</strong>：<ol><li>预览</li><li>读前提问</li><li>阅读</li><li>读后复述</li><li>总结</li></ol></li></ul><h3 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h3><ul><li>大纲</li><li>康奈尔分区</li><li>思维导图</li></ul><h3 id="记忆"><a href="#记忆" class="headerlink" title="记忆"></a>记忆</h3><ul><li>构造线索</li><li>间隔重复</li></ul><h3 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h3><ul><li>死线倒计时</li><li>日程时间线</li><li>内容管理系统</li><li>快速暂存区</li><li>大任务清单</li><li>小任务清单</li><li>睡前日总结&#x2F;计划</li><li>工前周总结&#x2F;计划</li></ul><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><h3 id="表达"><a href="#表达" class="headerlink" title="表达"></a>表达</h3><h2 id="学习的优化"><a href="#学习的优化" class="headerlink" title="学习的优化"></a>学习的优化</h2><h3 id="健康"><a href="#健康" class="headerlink" title="健康"></a>健康</h3><h3 id="要专注"><a href="#要专注" class="headerlink" title="要专注"></a>要专注</h3><p>工作质量 &#x3D; 注意力强度×持续时间</p><h3 id="不要拖延"><a href="#不要拖延" class="headerlink" title="不要拖延"></a>不要拖延</h3><h3 id="不要焦虑"><a href="#不要焦虑" class="headerlink" title="不要焦虑"></a>不要焦虑</h3>]]></content>
      
      
      
        <tags>
            
            <tag> 自制 </tag>
            
            <tag> 观点 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>美式英语国际音标表</title>
      <link href="/2020/02/27/%E7%BE%8E%E5%BC%8F%E8%8B%B1%E8%AF%AD%E5%9B%BD%E9%99%85%E9%9F%B3%E6%A0%87%E8%A1%A8/"/>
      <url>/2020/02/27/%E7%BE%8E%E5%BC%8F%E8%8B%B1%E8%AF%AD%E5%9B%BD%E9%99%85%E9%9F%B3%E6%A0%87%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="美式英语中的辅音（Consonants）"><a href="#美式英语中的辅音（Consonants）" class="headerlink" title="美式英语中的辅音（Consonants）"></a>美式英语中的辅音（Consonants）</h2><table><thead><tr><th>音位变体</th><th>重拼法</th><th>音位</th><th>在单词的开始</th><th>在单词的中间</th><th>在单词的末尾</th></tr></thead><tbody><tr><td>[p]</td><td>p</td><td>&#x2F;p&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/64">place</a>[ˈpleɪs]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/65">company</a>[ˈkʰʌmpənɪ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/66">group</a>[ˈɡɹup]</td></tr><tr><td>[pʰ]</td><td>p</td><td>&#x2F;p&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/67">part</a>[ˈpʰɑrt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/68">support</a>[səˈpʰɔrt]</td><td>-</td></tr><tr><td>[b]</td><td>b</td><td>&#x2F;b&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/69">be</a>[ˈbi]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/70">number</a>[ˈnʌmbɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/71">job</a>[ˈdʒɑb]</td></tr><tr><td>[t]</td><td>t</td><td>&#x2F;t&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/72">today</a>[təˈdeɪ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/73">still</a>[ˈstɪɫ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/74">get</a>[ˈɡɛt]</td></tr><tr><td>[tʰ]</td><td>t</td><td>&#x2F;t&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/75">two</a>[ˈtʰu]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/76">attention</a>[əˈtʰɛnʃən]</td><td>-</td></tr><tr><td>[ɾ]</td><td>t</td><td>&#x2F;t&#x2F; or &#x2F;d&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/77">water</a>[ˈwɔɾɚ]</td><td>-</td></tr><tr><td>[ʔ]</td><td>t</td><td>&#x2F;t&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/78">certain</a>[ˈsɝʔn̩]</td><td>-</td></tr><tr><td>[d]</td><td>d</td><td>&#x2F;d&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/79">day</a>[ˈdeɪ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/80">words</a>[ˈwɝdz]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/81">need</a>[ˈnid]</td></tr><tr><td>[k]</td><td>k</td><td>&#x2F;k&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/82">quite</a>[ˈkwaɪt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/83">next</a>[ˈnɛkst]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/84">like</a>[ˈlaɪk]</td></tr><tr><td>[kʰ]</td><td>k</td><td>&#x2F;k&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/85">come</a>[ˈkʰʌm]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/86">account</a>[əˈkʰaʊnt]</td><td>-</td></tr><tr><td>[ɡ]</td><td>g</td><td>&#x2F;ɡ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/87">go</a>[ˈɡoʊ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/88">together</a>[təˈɡɛðɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/89">big</a>[ˈbɪɡ]</td></tr><tr><td>[m]</td><td>m</td><td>&#x2F;m&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/90">me</a>[ˈmi]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/91">women</a>[ˈwɪmən]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/92">same</a>[ˈseɪm]</td></tr><tr><td>[m̩]</td><td>m</td><td>&#x2F;m̩&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/93">circumstances</a>[ˈsɝkm̩ˌstænsəz]</td><td>-</td></tr><tr><td>[n]</td><td>n</td><td>&#x2F;n&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/94">know</a>[ˈnoʊ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/95">another</a>[əˈnʌðɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/96">then</a>[ˈðɛn]</td></tr><tr><td>[n̩]</td><td>n</td><td>&#x2F;n̩&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/97">student</a>[ˈstudn̩t]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/98">person</a>[ˈpʰɝsn̩]</td></tr><tr><td>[ŋ]</td><td>ng, NG</td><td>&#x2F;ŋ&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/99">think</a>[ˈθɪŋk]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/100">thing</a>[ˈθɪŋ]</td></tr><tr><td>[f]</td><td>f</td><td>&#x2F;f&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/101">few</a>[ˈfju]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/102">often</a>[ˈɔfən]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/103">life</a>[ˈlaɪf]</td></tr><tr><td>[v]</td><td>v</td><td>&#x2F;v&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/104">voice</a>[ˈvɔɪs]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/105">ever</a>[ˈɛvɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/106">give</a>[ˈɡɪv]</td></tr><tr><td>[θ]</td><td>th, TH</td><td>&#x2F;θ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/107">three</a>[ˈθɹi]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/108">nothing</a>[ˈnʌθɪŋ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/109">death</a>[ˈdɛθ]</td></tr><tr><td>[ð]</td><td>dh, <u>TH</u></td><td>&#x2F;ð&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/110">there</a>[ˈðɛr]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/111">mother</a>[ˈmʌðɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/112">smooth</a>[ˈsmuð]</td></tr><tr><td>[s]</td><td>s</td><td>&#x2F;s&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/113">say</a>[ˈseɪ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/114">also</a>[ˈɔɫˌsoʊ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/115">yes</a>[ˈjɛs]</td></tr><tr><td>[z]</td><td>z</td><td>&#x2F;z&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/116">zone</a>[ˈzoʊn]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/117">music</a>[ˈmjuzɪk]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/118">does</a>[ˈdʌz]</td></tr><tr><td>[ʃ]</td><td>sh, SH</td><td>&#x2F;ʃ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/119">she</a>[ˈʃi]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/120">social</a>[ˈsoʊʃəɫ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/121">fish</a>[ˈfɪʃ]</td></tr><tr><td>[ʒ]</td><td>zh, ZH</td><td>&#x2F;ʒ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/122">genre</a>[ˈʒɑnɹə]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/123">decision</a>[dɪˈsɪʒən]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/124">garage</a>[ɡɚˈɹɑʒ]</td></tr><tr><td>[h]</td><td>h</td><td>&#x2F;h&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/125">how</a>[ˈhaʊ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/126">perhaps</a>[pɚˈhæps]</td><td>-</td></tr><tr><td>[tʃ]</td><td>ch, CH</td><td>&#x2F;tʃ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/127">child</a>[ˈtʃaɪəɫd]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/128">teacher</a>[ˈtʰitʃɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/129">much</a>[ˈmʌtʃ]</td></tr><tr><td>[dʒ]</td><td>j</td><td>&#x2F;dʒ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/130">just</a>[ˈdʒʌst]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/131">major</a>[ˈmeɪdʒɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/132">age</a>[ˈeɪdʒ]</td></tr><tr><td>[j]</td><td>y</td><td>&#x2F;j&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/133">yet</a>[ˈjɛt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/134">million</a>[ˈmɪɫjən]</td><td>-</td></tr><tr><td>[w]</td><td>w</td><td>&#x2F;w&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/135">when</a>[ˈwɛn]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/136">away</a>[əˈweɪ]</td><td>-</td></tr><tr><td>[ɹ]</td><td>r</td><td>&#x2F;ɹ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/137">right</a>[ˈɹaɪt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/138">through</a>[ˈθɹu]</td><td>-</td></tr><tr><td>[l]</td><td>l</td><td>&#x2F;l&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/139">last</a>[ˈlæst]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/140">believe</a>[bəˈliv]</td><td>-</td></tr><tr><td>[ɫ]</td><td>l</td><td>&#x2F;l&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/141">old</a>[ˈoʊɫd]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/142">well</a>[ˈwɛɫ]</td></tr><tr><td>[ɫ̩]</td><td>l</td><td>&#x2F;l̩&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/143">models</a>[ˈmɑɾɫ̩z]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/144">little</a>[ˈlɪɾɫ̩]</td></tr></tbody></table><h2 id="美式英语中的元音（Vowels）"><a href="#美式英语中的元音（Vowels）" class="headerlink" title="美式英语中的元音（Vowels）"></a>美式英语中的元音（Vowels）</h2><table><thead><tr><th>音位变体</th><th>重拼法</th><th>音位</th><th>在单词的开始</th><th>在单词的中间</th><th>在单词的末尾</th></tr></thead><tbody><tr><td>[i]</td><td>ee, ē</td><td>&#x2F;i&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/1">even</a>[ˈivən]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/2">these</a>[ˈðiz]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/3">we</a>[ˈwi]</td></tr><tr><td>[ɪ]</td><td>i</td><td>&#x2F;ɪ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/4">if</a>[ˈɪf]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/5">which</a>[ˈwɪtʃ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/6">many</a>[ˈmɛnɪ]</td></tr><tr><td>[e]</td><td>e</td><td>&#x2F;e&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/7">vacation</a>[veˈkʰeɪʃən]</td><td>-</td></tr><tr><td>[ɛ]</td><td>eh, e</td><td>&#x2F;ɛ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/8">any</a>[ˈɛnɪ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/9">said</a>[ˈsɛd]</td><td>-</td></tr><tr><td>[æ]</td><td>a</td><td>&#x2F;æ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/10">ask</a>[ˈæsk]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/11">back</a>[ˈbæk]</td><td>-</td></tr><tr><td>[u]</td><td>oo, o͞o</td><td>&#x2F;u&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/12">oozing</a>[ˈuzɪŋ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/13">school</a>[ˈskuɫ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/14">who</a>[ˈhu]</td></tr><tr><td>[ʊ]</td><td>u, o͝o</td><td>&#x2F;ʊ&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/15">good</a>[ˈɡʊd]</td><td>-</td></tr><tr><td>[o]</td><td>ow, ō</td><td>&#x2F;o&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/16">okay</a>[oˈkʰeɪ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/17">November</a>[noˈvɛmbɚ]</td><td>-</td></tr><tr><td>[ɔ]</td><td>aa, ä</td><td>&#x2F;ɔ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/18">all</a>[ˈɔɫ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/19">want</a>[ˈwɔnt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/20">saw</a>[ˈsɔ]</td></tr><tr><td>[ɑ]</td><td>aa, ä</td><td>&#x2F;ɑ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/21">October</a>[ɑkˈtʰoʊbɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/22">not</a>[ˈnɑt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/23">grandma</a>[ˈɡɹændˌmɑ]</td></tr><tr><td>[ə]</td><td>uh, ə</td><td>&#x2F;ə&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/24">about</a>[əˈbaʊt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/25">people</a>[ˈpʰipəɫ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/26">idea</a>[aɪˈdiə]</td></tr><tr><td>[ʌ]</td><td>uh, ə</td><td>&#x2F;ʌ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/27">other</a>[ˈʌðɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/28">one</a>[ˈwʌn]</td><td>-</td></tr></tbody></table><h2 id="美式英语中的儿化元音（R-colored-vowels）"><a href="#美式英语中的儿化元音（R-colored-vowels）" class="headerlink" title="美式英语中的儿化元音（R-colored vowels）"></a>美式英语中的儿化元音（R-colored vowels）</h2><table><thead><tr><th>音位变体</th><th>重拼法</th><th>音位</th><th>在单词的开始</th><th>在单词的中间</th><th>在单词的末尾</th></tr></thead><tbody><tr><td>[ɚ]</td><td>(u)r, ər</td><td>&#x2F;ɚ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/29">around</a>[ɚˈɹaʊnd]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/30">percent</a>[pɚˈsɛnt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/31">never</a>[ˈnɛvɚ]</td></tr><tr><td>[ɝ]</td><td>ur, ər</td><td>&#x2F;ɝ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/32">early</a>[ˈɝlɪ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/33">first</a>[ˈfɝst]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/34">sir</a>[ˈsɝ]</td></tr><tr><td>[ɪr]</td><td>eer, i(ə)r</td><td>&#x2F;ɪr&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/35">ears</a>[ˈɪrz]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/36">years</a>[ˈjɪrz]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/37">here</a>[ˈhɪr]</td></tr><tr><td>[ɛr]</td><td>ehr, e(ə)r</td><td>&#x2F;ɛr&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/38">airport</a>[ˈɛrˌpɔrt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/39">therefore</a>[ˈðɛrˌfɔr]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/40">where</a>[ˈwɛr]</td></tr><tr><td>[ʊr]</td><td>or, ôr</td><td>&#x2F;ʊr&#x2F;</td><td>-</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/41">insurance</a>[ɪnˈʃʊrəns]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/42">sure</a>[ˈʃʊr]</td></tr><tr><td>[ɔr]</td><td>or, ôr</td><td>&#x2F;ɔr&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/43">order</a>[ˈɔrɾɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/44">morning</a>[ˈmɔrnɪŋ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/45">more</a>[ˈmɔr]</td></tr><tr><td>[ɑr]</td><td>aar, är</td><td>&#x2F;ɑr&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/46">art</a>[ˈɑrt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/47">large</a>[ˈlɑrdʒ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/48">far</a>[ˈfɑr]</td></tr></tbody></table><h2 id="美式英语中的双元音（Diphthongs）"><a href="#美式英语中的双元音（Diphthongs）" class="headerlink" title="美式英语中的双元音（Diphthongs）"></a>美式英语中的双元音（Diphthongs）</h2><table><thead><tr><th>音位变体</th><th>重拼法</th><th>音位</th><th>在单词的开始</th><th>在单词的中间</th><th>在单词的末尾</th></tr></thead><tbody><tr><td>[aɪ]</td><td>ai, ī</td><td>&#x2F;aɪ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/49">eyes</a>[ˈaɪz]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/50">time</a>[ˈtʰaɪm]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/51">why</a>[ˈwaɪ]</td></tr><tr><td>[aʊ]</td><td>aw, ou</td><td>&#x2F;aʊ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/52">out</a>[ˈaʊt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/53">down</a>[ˈdaʊn]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/54">now</a>[ˈnaʊ]</td></tr><tr><td>[ɔɪ]</td><td>oy, oi</td><td>&#x2F;ɔɪ&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/55">oil</a>[ˈɔɪəɫ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/56">point</a>[ˈpʰɔɪnt]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/57">boy</a>[ˈbɔɪ]</td></tr><tr><td>[eɪ]</td><td>ei, ā</td><td>&#x2F;e&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/58">able</a>[ˈeɪbəɫ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/59">make</a>[ˈmeɪk]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/60">way</a>[ˈweɪ]</td></tr><tr><td>[oʊ]</td><td>ow, ō</td><td>&#x2F;o&#x2F;</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/61">over</a>[ˈoʊvɚ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/62">both</a>[ˈboʊθ]</td><td><a href="https://easypronunciation.com/zh/play-video/learn-english_american/63">so</a>[ˈsoʊ]</td></tr></tbody></table><h2 id="国际音标表注释"><a href="#国际音标表注释" class="headerlink" title="国际音标表注释"></a>国际音标表注释</h2><h3 id="重拼法（Respelling）"><a href="#重拼法（Respelling）" class="headerlink" title="重拼法（Respelling）"></a>重拼法（Respelling）</h3><p><strong>重拼法</strong>采用原有的、常见的符号代替要拼音的符号，需要时可在符号上添加标记。重拼法和国际音标是英文标音的两种主流方法。音标是在国内为大家熟知的方法,然而在英美许多针对母语者的英文词典常用重拼法。重拼法更符合母语说话人的直觉,且更易输入。本表中重拼法参考自谷歌搜索的英语发音工具插件。</p><h3 id="音位和音位变体（Phonemes-and-allophones）"><a href="#音位和音位变体（Phonemes-and-allophones）" class="headerlink" title="音位和音位变体（Phonemes and allophones）"></a>音位和音位变体（Phonemes and allophones）</h3><p><strong>音位</strong>（<strong>phoneme</strong>）是能够改变词义的语音。例如，将单词kiss中的最后一个音替换为&#x2F;l&#x2F;音就成了另一个单词 kill。因此，&#x2F;s&#x2F;和&#x2F;l&#x2F;都是音位。</p><p><strong>宽式音标</strong>（<strong>Phonemic transcription</strong>）使用音位来显示单词的发音。它是写在斜线之间的，如下例所示：</p><ul><li>kiss &#x2F;ˈkɪs&#x2F;</li><li>kill &#x2F;ˈkɪl&#x2F;</li></ul><p>这种音标没有显示出在类似音之间的细微差别。为了显示单词的确切发音，需要<strong>严式音标</strong>（<strong>narrow transcription</strong>）。例如，对于同样的两个单词，我们会写成：</p><ul><li>kiss [ˈkʰɪs]</li><li>kill [ˈkʰɪɫ]</li></ul><p>请注意，在严式音标中使用方括号而不是斜线。在我们的例子中，严式音标也使用了略有不同的符号。为什么？因为一种语言中的每个音位可能有几种不同的发音。同一<strong>音位</strong>的这些变体发音被称为<strong>音位变体</strong>（<strong>allophone</strong>）。</p><p>让我们以<strong>音位</strong> &#x2F;k&#x2F;为例。在英语中，&#x2F;k&#x2F;有两个<strong>音位变体</strong>：</p><ul><li>不送气的音[k]，如 quite [ˈkwaɪt]</li><li>在释放后有强气的送气音[kʰ]，如 kill [ˈkʰɪɫ]</li></ul><p>如果您真的想提高发音并且听起来像母语人士一样发音，那么，我强烈建议您熟悉英语中每一个<strong>音位</strong>的所有<strong>音位变体</strong>（不同的变体）。</p><p>例如，我们来看下列英文单词中的音位&#x2F;t&#x2F;：today, two, water, certain。如果用词典查找它们的发音，您很可能会发现这样的情形：</p><ul><li>today &#x2F;təˈdeɪ&#x2F;</li><li>two &#x2F;ˈtuː&#x2F;</li><li>water &#x2F;ˈwɔtɚ&#x2F;或&#x2F;ˈwɔtər&#x2F;</li><li>certain &#x2F;ˈsɝt(ə)n&#x2F;</li></ul><p>所有四个词都有“同一个”音位&#x2F; t &#x2F;。但听起来一样吗？不一样！在<strong>严式音标</strong>（它显示确切的发音，记得吧？）中，相同的这几个词将如下标注：</p><ul><li>today [təˈdeɪ]</li><li>two [ˈtʰu]</li><li>water [ˈwɔɾɚ]</li><li>certain [ˈsɝʔn̩]</li></ul><p>这意味着，音位&#x2F;t&#x2F;具有至少四个音位变体：</p><ul><li>未吸气的[t]</li><li>吸气的[tʰ]</li><li>听起来几乎像[d]的齿龈闪音[ɾ]</li><li>通过阻塞声带（声门）中的气流产生的喉塞音[ʔ]</li></ul><h3 id="本表中使用的国际音标符号"><a href="#本表中使用的国际音标符号" class="headerlink" title="本表中使用的国际音标符号"></a>本表中使用的国际音标符号</h3><p>在这个国际音标表中使用的标音符号可能与您在包括维基百科在内的<a href="https://zh.wikipedia.org/wiki/%E8%8B%B1%E8%AA%9E%E5%9C%8B%E9%9A%9B%E9%9F%B3%E6%A8%99%E5%88%97%E8%A1%A8"><strong>用于英语方言的综合国际音标表</strong></a>的其它来源可以找到的内容稍有不同。</p><p>我一度很难确定本页面上的国际音标表该使用哪一套国际音标符号。我最终决定遵从Larry H. Small的<a href="https://www.pearsonhighered.com/program/Small-Fundamentals-of-Phonetics-A-Practical-Guide-for-Students-4th-Edition/PGM20009.html"><strong>《音标基础》（Fundamentals of Phonetics）</strong></a>第4版的建议。该书从其它来源提供了非常好的所有内容的摘要。</p><p>在下表中，您将找到本书中使用的音标的特征。</p><table><thead><tr><th>特征</th><th>《音标基础》中的音标</th><th>在大多数美式英语词典中的音标</th></tr></thead><tbody><tr><td>音节辅音&#x2F;l̩&#x2F;、&#x2F;m̩&#x2F;和&#x2F;n̩&#x2F;用位于其下的小竖线来显示。 例词：little，student</td><td>&#x2F;ˈlɪtl̩&#x2F; &#x2F;ˈstudn̩t&#x2F;</td><td>&#x2F;ˈlɪt(ə)l&#x2F; &#x2F;ˈstud(ə)nt&#x2F;</td></tr><tr><td>重音&#x2F;ˈər&#x2F;被写为&#x2F;ɝ&#x2F;，非重音&#x2F;ər&#x2F;被写为&#x2F;ɚ&#x2F;。 例词：first，other</td><td>&#x2F;ˈfɝst&#x2F; &#x2F;ˈʌðɚ&#x2F;</td><td>&#x2F;ˈfərst&#x2F; &#x2F;ˈʌðər&#x2F;</td></tr><tr><td>最后的非重音&#x2F;i&#x2F;被写为&#x2F;ɪ&#x2F;。 例词：very，early</td><td>&#x2F;ˈvɛrɪ&#x2F; &#x2F;ˈɝlɪ&#x2F;</td><td>&#x2F;ˈvɛriː&#x2F; &#x2F;ˈərliː&#x2F;</td></tr><tr><td>非重音&#x2F;eɪ&#x2F;被写为&#x2F;e&#x2F;，非重音&#x2F;oʊ&#x2F;被写为&#x2F;o&#x2F;。在最后的位置，即使是非重音，它们仍然是双元音&#x2F;eɪ&#x2F;和&#x2F;oʊ&#x2F;。 例词：vacation，photos</td><td>&#x2F;veˈkeɪʃən&#x2F; &#x2F;ˈfoʊtoz&#x2F; &#x2F;ˈfoʊtoʊ&#x2F;</td><td>&#x2F;veɪˈkeɪʃən&#x2F; &#x2F;ˈfoʊtoʊz&#x2F; &#x2F;ˈfoʊtoʊ&#x2F;</td></tr><tr><td>音位&#x2F;u&#x2F;和&#x2F;i&#x2F;不使用延长符号[ː]。 例词：eat，group</td><td>&#x2F;ˈit&#x2F; &#x2F;ˈɡɹup&#x2F;</td><td>&#x2F;ˈiːt&#x2F; &#x2F;ˈɡɹuːp&#x2F;</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> 搬运 </tag>
            
            <tag> 英语 </tag>
            
            <tag> 语音 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MathJax-LaTeX 语法</title>
      <link href="/2020/01/12/MathJax-%E7%9B%B8%E5%85%B3LaTeX%E8%AF%AD%E6%B3%95/"/>
      <url>/2020/01/12/MathJax-%E7%9B%B8%E5%85%B3LaTeX%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="常见符号的写法"><a href="#常见符号的写法" class="headerlink" title="常见符号的写法"></a>常见符号的写法</h2><h3 id="1-指数和下标-左上、左下、右上、右下、正上、正下"><a href="#1-指数和下标-左上、左下、右上、右下、正上、正下" class="headerlink" title="1. 指数和下标(左上、左下、右上、右下、正上、正下)"></a>1. 指数和下标(左上、左下、右上、右下、正上、正下)</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span>a<span class="built_in">_</span>1<span class="keyword">\qquad</span> x<span class="built_in">^</span>2<span class="keyword">\qquad</span> e<span class="built_in">^</span>&#123;-<span class="keyword">\alpha</span> t&#125;<span class="keyword">\qquad</span> e<span class="built_in">^</span>&#123;x<span class="built_in">^</span>2&#125;<span class="keyword">\neq</span>&#123;e<span class="built_in">^</span>x&#125;<span class="built_in">^</span>2<span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\sideset</span>&#123;<span class="built_in">^</span>1<span class="built_in">_</span>2&#125;&#123;<span class="built_in">^</span>3<span class="built_in">_</span>4&#125;<span class="keyword">\bigotimes</span><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\mathop</span>&#123;abc&#125;<span class="keyword">\limits</span><span class="built_in">_</span>1<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$a_1\qquad x^2\qquad e^{-\alpha t}\qquad e^{x^2}\neq{e^x}^2$$<br>$$\sideset{^1_2}{^3_4}\bigotimes$$<br>$$\mathop{abc}\limits_1$$</p><h3 id="2-平方根和n-次方根（自动调整形式、仅符号形式）"><a href="#2-平方根和n-次方根（自动调整形式、仅符号形式）" class="headerlink" title="2. 平方根和n 次方根（自动调整形式、仅符号形式）"></a>2. 平方根和n 次方根（自动调整形式、仅符号形式）</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\sqrt</span>&#123;x&#125;<span class="keyword">\qquad</span><span class="keyword">\sqrt</span>&#123;x<span class="built_in">^</span>2+<span class="keyword">\sqrt</span> y&#125; <span class="keyword">\qquad</span><span class="keyword">\sqrt</span>[3]2<span class="keyword">\qquad</span><span class="keyword">\surd</span>[x<span class="built_in">^</span>2+y<span class="built_in">^</span>2]<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\sqrt{x}\qquad\sqrt{x^2+\sqrt y} \qquad\sqrt[3]2\qquad\surd[x^2+y^2]$$</p><h3 id="3-水平线（上方、下方）"><a href="#3-水平线（上方、下方）" class="headerlink" title="3. 水平线（上方、下方）"></a>3. 水平线（上方、下方）</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\overline</span>&#123;m+n&#125;<span class="keyword">\qquad</span> <span class="keyword">\underline</span>&#123;m+n&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\overline{m+n}\qquad \underline{m+n}$$</p><h3 id="4-括号（大小调整、隐藏形式）"><a href="#4-括号（大小调整、隐藏形式）" class="headerlink" title="4. 括号（大小调整、隐藏形式）"></a>4. 括号（大小调整、隐藏形式）</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span>f(x,y,z) = 3y<span class="built_in">^</span>2z <span class="keyword">\left</span>( 3+<span class="keyword">\frac</span>&#123;7x+5&#125;&#123;1+y<span class="built_in">^</span>2&#125; <span class="keyword">\right</span>)<span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\left</span>.&#123;<span class="keyword">\rm</span> d&#125;u <span class="keyword">\over</span> &#123;<span class="keyword">\rm</span> d&#125;x <span class="keyword">\right</span>|<span class="built_in">_</span>&#123;x=0&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$f(x,y,z) &#x3D; 3y^2z\left ( 3+\frac{7x+5}{1+y^2} \right)$$<br>$$ \left.{\rm d}u \over {\rm d}x \right|_{x&#x3D;0}$$</p><h3 id="5-水平大括号"><a href="#5-水平大括号" class="headerlink" title="5. 水平大括号"></a>5. 水平大括号</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\underbrace</span>&#123;a+b+<span class="keyword">\dots</span>+z&#125;<span class="built_in">_</span>&#123;26&#125; <span class="keyword">\qquad</span> <span class="keyword">\overbrace</span>&#123;0+1+<span class="keyword">\dots</span>+9&#125;<span class="built_in">^</span>&#123;10&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\underbrace{a+b+\dots+z}_{26}\qquad \overbrace{0+1+\dots+9}^{10}$$</p><h3 id="6-公式大括号"><a href="#6-公式大括号" class="headerlink" title="6. 公式大括号"></a>6. 公式大括号</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span>f(x)=<span class="keyword">\left</span><span class="keyword">\\</span>&#123;<span class="keyword">\begin</span>&#123;aligned&#125;x <span class="built_in">&amp;</span>=<span class="built_in">&amp;</span> <span class="keyword">\cos</span>(t) <span class="keyword">\\</span><span class="keyword">\\</span>y <span class="built_in">&amp;</span>=<span class="built_in">&amp;</span> <span class="keyword">\sin</span>(t) <span class="keyword">\\</span><span class="keyword">\\</span>z <span class="built_in">&amp;</span>=<span class="built_in">&amp;</span> <span class="keyword">\frac</span> xy<span class="keyword">\end</span>&#123;aligned&#125;<span class="keyword">\right</span>.<span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span>F<span class="built_in">^</span>&#123;HLLC&#125;=<span class="keyword">\left</span><span class="keyword">\\</span>&#123;<span class="keyword">\begin</span>&#123;array&#125;&#123;rcl&#125;F<span class="built_in">_</span>L<span class="built_in">&amp;</span><span class="built_in">&amp;</span>&#123;0&lt;S<span class="built_in">_</span>L&#125;<span class="keyword">\\</span><span class="keyword">\\</span>F<span class="built_in">^</span>*<span class="built_in">_</span>L<span class="built_in">&amp;</span><span class="built_in">&amp;</span>&#123;S<span class="built_in">_</span>L <span class="keyword">\leq</span> 0 &lt; S<span class="built_in">_</span>M&#125;<span class="keyword">\\</span><span class="keyword">\\</span>F<span class="built_in">^</span>*<span class="built_in">_</span>R<span class="built_in">&amp;</span><span class="built_in">&amp;</span>&#123;S<span class="built_in">_</span>M<span class="keyword">\leq</span>0&lt;S<span class="built_in">_</span>R&#125;<span class="keyword">\\</span><span class="keyword">\\</span>F<span class="built_in">_</span>R<span class="built_in">&amp;</span><span class="built_in">&amp;</span>S<span class="built_in">_</span>R<span class="keyword">\leq</span>0 <span class="keyword">\end</span>&#123;array&#125;<span class="keyword">\right</span>.<span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span>f(x)=<span class="keyword">\begin</span>&#123;cases&#125;0<span class="built_in">&amp;</span>&#123;x=0&#125;<span class="keyword">\\</span><span class="keyword">\\</span> 1<span class="built_in">&amp;</span>&#123;x<span class="keyword">\neq</span> 0&#125;<span class="keyword">\end</span>&#123;cases&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$f(x)&#x3D;\left\{\begin{aligned}x &amp;&#x3D;&amp; \cos(t) \\y &amp;&#x3D;&amp; \sin(t) \\z &amp;&#x3D;&amp; \frac xy\end{aligned}\right.$$<br>$$F^{HLLC}&#x3D;\left\{\begin{array}{rcl}F_L&amp;&amp;{0&lt;S_L} \\F^*_L&amp;&amp;{S_L \leq 0 &lt; S_M} \\F^*_R&amp;&amp;{S_M\leq0&lt;S_R} \\F_R&amp;&amp;S_R\leq0 \end{array}\right.$$</p><p>$$f(x)&#x3D;\begin{cases}0&amp;{x&#x3D;0} \\ 1&amp;{x\neq 0}\end{cases}$$</p><h3 id="7-向量"><a href="#7-向量" class="headerlink" title="7. 向量"></a>7. 向量</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\vec</span> a<span class="keyword">\qquad</span> <span class="keyword">\overrightarrow</span> &#123;AB&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\vec a\qquad \overrightarrow {AB}$$</p><h3 id="8-分数"><a href="#8-分数" class="headerlink" title="8. 分数"></a>8. 分数</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span>1<span class="keyword">\frac</span>&#123;1&#125;&#123;2&#125;hours<span class="keyword">\qquad</span> <span class="keyword">\frac</span>&#123;x<span class="built_in">^</span>2&#125;&#123;k+1&#125; <span class="keyword">\qquad</span> x<span class="built_in">^</span>&#123;<span class="keyword">\frac</span>&#123;2&#125;&#123;k+1&#125;&#125; <span class="keyword">\qquad</span> x<span class="built_in">^</span>&#123;1/2&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span>1 <span class="keyword">\over</span> 2<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$1\frac12hours\qquad \frac{x^2}{k+1} \qquad x^{\frac{2}{k+1}} \qquad x^{1&#x2F;2}$$<br>$$1 \over 2$$</p><h3 id="9-省略号（与底线对齐、与中线对齐）"><a href="#9-省略号（与底线对齐、与中线对齐）" class="headerlink" title="9. 省略号（与底线对齐、与中线对齐）"></a>9. 省略号（与底线对齐、与中线对齐）</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span>f(x<span class="built_in">_</span>1,x<span class="built_in">_</span>x,<span class="keyword">\ldots</span>,x<span class="built_in">_</span>n) = x<span class="built_in">_</span>1<span class="built_in">^</span>2 + x<span class="built_in">_</span>2<span class="built_in">^</span>2 + <span class="keyword">\cdots</span> + x<span class="built_in">_</span>n<span class="built_in">^</span>2 <span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$f(x_1,x_x,\ldots,x_n) &#x3D; x_1^2 + x_2^2 + \cdots + x_n^2 $$ </p><h3 id="10-积分运算符和求和运算符和乘积运算符"><a href="#10-积分运算符和求和运算符和乘积运算符" class="headerlink" title="10. 积分运算符和求和运算符和乘积运算符"></a>10. 积分运算符和求和运算符和乘积运算符</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\sum</span><span class="built_in">_</span>&#123;x=1&#125;<span class="built_in">^</span>&#123;n&#125;<span class="keyword">\qquad</span> <span class="keyword">\sum</span><span class="keyword">\limits</span><span class="built_in">_</span>&#123;i=1&#125;<span class="built_in">^</span>n <span class="keyword">\qquad</span> <span class="keyword">\int</span><span class="built_in">_</span>0<span class="built_in">^</span>&#123;<span class="keyword">\frac</span><span class="keyword">\pi</span>2&#125; <span class="keyword">\qquad</span> <span class="keyword">\prod</span><span class="keyword">\limits</span><span class="built_in">_</span><span class="keyword">\epsilon</span><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\sum_{x&#x3D;1}^{n}\qquad \sum\limits_{i&#x3D;1}^n \qquad \int_0^{\frac\pi2} \qquad \prod\limits_\epsilon$$</p><h3 id="11-极限"><a href="#11-极限" class="headerlink" title="11. 极限"></a>11. 极限</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\lim</span><span class="keyword">\limits</span><span class="built_in">_</span>&#123;n<span class="keyword">\rightarrow</span>+<span class="keyword">\infty</span>&#125;<span class="keyword">\frac</span> 1&#123;n(n+1)&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\lim\limits_{n\rightarrow+\infty}\frac 1{n(n+1)}$$</p><h3 id="12-多行数学公式"><a href="#12-多行数学公式" class="headerlink" title="12. 多行数学公式"></a>12. 多行数学公式</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\begin</span>&#123;eqnarray&#125;<span class="keyword">\cos</span> 2<span class="keyword">\theta</span> <span class="built_in">&amp;</span> = <span class="built_in">&amp;</span> cos<span class="built_in">^</span>2 <span class="keyword">\theta</span> - <span class="keyword">\sin</span><span class="built_in">^</span>2 <span class="keyword">\theta</span> <span class="keyword">\\</span><span class="keyword">\\</span> <span class="built_in">&amp;</span> = <span class="built_in">&amp;</span> 2 cos<span class="built_in">^</span>2 <span class="keyword">\theta</span>- 1.<span class="keyword">\end</span>&#123;eqnarray&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\begin{eqnarray}\cos2\theta&amp;&#x3D;&amp; \cos^2\theta-\sin^2\theta \\ &amp; &#x3D; &amp; 2 \cos^2\theta-1.\end{eqnarray}$$</p><h3 id="13-矩阵"><a href="#13-矩阵" class="headerlink" title="13. 矩阵"></a>13. 矩阵</h3><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\left</span>( <span class="keyword">\begin</span>&#123;array&#125;&#123;&#125;a<span class="built_in">&amp;</span>b<span class="built_in">&amp;</span>c <span class="keyword">\\</span><span class="keyword">\\</span> d<span class="built_in">&amp;</span>e<span class="built_in">&amp;</span>f <span class="keyword">\\</span><span class="keyword">\\</span> g<span class="built_in">&amp;</span>h<span class="built_in">&amp;</span>i <span class="keyword">\end</span>&#123;array&#125; <span class="keyword">\right</span>)<span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\chi</span>(<span class="keyword">\lambda</span>)=<span class="keyword">\left</span>|<span class="keyword">\begin</span>&#123;array&#125;&#123;ccc&#125;<span class="keyword">\lambda</span>-a<span class="built_in">&amp;</span>-b<span class="built_in">&amp;</span>-c<span class="keyword">\-</span>d<span class="built_in">&amp;</span><span class="keyword">\lambda</span>-e<span class="built_in">&amp;</span>-f<span class="keyword">\-</span>g<span class="built_in">&amp;</span>-h<span class="built_in">&amp;</span><span class="keyword">\lambda</span>-i <span class="keyword">\end</span>&#123;array&#125;<span class="keyword">\right</span>|<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>$$\left( \begin{array}{}a&amp;b&amp;c \\ d&amp;e&amp;f \\ g&amp;h&amp;i \end{array} \right)$$<br>$$ \chi(\lambda) &#x3D; \left| \begin{array}{ccc} \lambda - a &amp; -b &amp; -c \\ -d &amp; \lambda - e &amp; -f \\ -g &amp; -h &amp; \lambda - i \end{array} \right|$$</p><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li>由于mathjax的配置以及网页渲染的方式各不相同，公式中的<code>\\</code>可能被转义成<code>\</code>，这是需要<code>\\\\</code>来表达<code>\\</code>。</li><li>渲染后的公式可能会过长导致显示不全，这时需要对公式所属元素配置CSS，一种解决方案如下：<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.MJXc-display</span></span><br><span class="line">  <span class="attribute">overflow-x</span>: scroll</span><br><span class="line">  <span class="attribute">overflow-y</span>: hidden</span><br></pre></td></tr></table></figure>详见<a href="https://github.com/rochero/blog/raw/master/nshort.pdf">一份不太简短的$\LaTeX2_{\varepsilon}$介绍</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 数学 </tag>
            
            <tag> LaTeX </tag>
            
            <tag> MathJax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>三角函数常用公式</title>
      <link href="/2020/01/12/%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%B8%B8%E7%94%A8%E5%85%AC%E5%BC%8F/"/>
      <url>/2020/01/12/%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%B8%B8%E7%94%A8%E5%85%AC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="平方关系"><a href="#平方关系" class="headerlink" title="平方关系"></a>平方关系</h2><p>$$sin^2\alpha+cos^2\alpha&#x3D;1 \qquad 1+tan^2\alpha&#x3D;sec^2\alpha \qquad 1+cot^2\alpha&#x3D;csc^2\alpha$$</p><h2 id="倒数关系"><a href="#倒数关系" class="headerlink" title="倒数关系"></a>倒数关系</h2><p>$$<br>sin\alpha\ csc\alpha &#x3D; 1 \qquad cos\alpha \ sec\alpha &#x3D; 1 \qquad \tan\alpha \ cot\alpha &#x3D; 1<br>$$</p><h2 id="商数关系"><a href="#商数关系" class="headerlink" title="商数关系"></a>商数关系</h2><p>$$<br>tan\alpha &#x3D; {sin\alpha \over cos\alpha} \qquad cot\alpha &#x3D; {cos\alpha \over sin\alpha}<br>$$</p><h2 id="两角和差公式"><a href="#两角和差公式" class="headerlink" title="两角和差公式"></a>两角和差公式</h2><p>$$<br>sin(\alpha\pm\beta)&#x3D;sin\alpha cos\beta \pm cos\alpha sin\beta \qquad<br>cos(\alpha\pm\beta)&#x3D;cos\alpha cos\beta \mp sin\alpha sin\beta<br>$$</p><h2 id="积化和差公式"><a href="#积化和差公式" class="headerlink" title="积化和差公式"></a>积化和差公式</h2><p>$$<br>sin\alpha \cdot cos\beta &#x3D; {1 \over 2}[sin(\alpha+\beta) + sin(\alpha-\beta)] \qquad<br>cos\alpha \cdot sin\beta &#x3D; {1 \over 2}[sin(\alpha+\beta) - sin(\alpha-\beta)] \qquad<br>cos\alpha \cdot cos\beta &#x3D; {1 \over 2}[cos(\alpha+\beta) + cos(\alpha-\beta)] \qquad<br>sin\alpha \cdot sin\beta &#x3D; -{1 \over 2}[cos(\alpha+\beta) - cos(\alpha-\beta)]<br>$$</p><h2 id="和差化积公式"><a href="#和差化积公式" class="headerlink" title="和差化积公式"></a>和差化积公式</h2><p>$$<br>sin\alpha + sin \beta &#x3D; 2sin{\alpha+\beta \over 2}cos{\alpha - \beta \over 2} \qquad<br>sin\alpha - sin \beta &#x3D; 2cos{\alpha+\beta \over 2}sin{\alpha - \beta \over 2} \qquad<br>cos\alpha + cos \beta &#x3D; 2cos{\alpha+\beta \over 2}cos{\alpha - \beta \over 2} \qquad<br>cos\alpha - cos \beta &#x3D; 2sin{\alpha+\beta \over 2}sin{\alpha - \beta \over 2}<br>$$</p><h2 id="常用倍角公式"><a href="#常用倍角公式" class="headerlink" title="常用倍角公式"></a>常用倍角公式</h2><p>$$<br>sin2\alpha  &#x3D; 2sin\alpha cos\alpha \qquad<br>cos2\alpha &#x3D; cos^2\alpha - sin^2\alpha &#x3D; 2cos^2\alpha-1&#x3D;1-2sin^2\alpha \qquad<br>sin3\alpha &#x3D; 3sin\alpha-4sin^3\alpha \qquad<br>cos3\alpha &#x3D; 4cos^3\alpha-3cos\alpha<br>$$</p><h2 id="降幂公式"><a href="#降幂公式" class="headerlink" title="降幂公式"></a>降幂公式</h2><p>$$<br>sin^2\alpha &#x3D; {1-cos2\alpha \over 2} \qquad<br>cos^2\alpha &#x3D; {1+cos\alpha \over 2} \qquad<br>sin^3\alpha &#x3D; {3sin\alpha-sin3\alpha \over 4} \qquad<br>cos^3\alpha &#x3D; {3cos\alpha+cos3\alpha \over 4}<br>$$</p>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 数学 </tag>
            
            <tag> 公式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>希腊字母简表及发音</title>
      <link href="/2020/01/12/%E5%B8%8C%E8%85%8A%E5%AD%97%E6%AF%8D%E7%AE%80%E8%A1%A8%E5%8F%8A%E8%8B%B1%E8%AF%AD%E8%AF%BB%E9%9F%B3/"/>
      <url>/2020/01/12/%E5%B8%8C%E8%85%8A%E5%AD%97%E6%AF%8D%E7%AE%80%E8%A1%A8%E5%8F%8A%E8%8B%B1%E8%AF%AD%E8%AF%BB%E9%9F%B3/</url>
      
        <content type="html"><![CDATA[<h2 id="希腊字母简表（以下均为英语读法，非希腊语本音）"><a href="#希腊字母简表（以下均为英语读法，非希腊语本音）" class="headerlink" title="希腊字母简表（以下均为英语读法，非希腊语本音）"></a><strong>希腊字母简表</strong>（以下均为英语读法，非希腊语本音）</h2><table><thead><tr><th>字母名称</th><th>国际音标</th><th>大写字母</th><th>小写字母</th><th>字母名称</th><th>国际音标</th><th>大写字母</th><th>小写字母</th></tr></thead><tbody><tr><td>alpha</td><td>&#x2F;‘ælfə&#x2F;</td><td>Α</td><td>α</td><td>nu</td><td>&#x2F;nju:&#x2F;</td><td>Ν</td><td>ν</td></tr><tr><td>beta</td><td>&#x2F;‘bi:tə&#x2F;或 &#x2F;‘beɪtə&#x2F;</td><td>Β</td><td>β</td><td>xi</td><td>希腊 &#x2F;ksi&#x2F;；英美 &#x2F;ˈzaɪ&#x2F; 或 &#x2F;ˈksaɪ&#x2F;</td><td>Ξ</td><td>ξ</td></tr><tr><td>gamma</td><td>&#x2F;‘gæmə&#x2F;</td><td>Γ</td><td>γ</td><td>omicron</td><td>&#x2F;əuˈmaikrən&#x2F;或 &#x2F;ˈɑmɪˌkrɑn&#x2F;</td><td>Ο</td><td>ο</td></tr><tr><td>delta</td><td>&#x2F;‘deltə&#x2F;</td><td>Δ</td><td>δ</td><td>pi</td><td>&#x2F;paɪ&#x2F;</td><td>Π</td><td>π</td></tr><tr><td>epsilon</td><td>&#x2F;‘epsɪlɒn&#x2F;</td><td>Ε</td><td>ε</td><td>rho</td><td>&#x2F;rəʊ&#x2F;</td><td>Ρ</td><td>ρ</td></tr><tr><td>zeta</td><td>&#x2F;‘zi:tə&#x2F;</td><td>Ζ</td><td>ζ</td><td>sigma</td><td>&#x2F;‘sɪɡmə&#x2F;</td><td>Σ</td><td>σ ς</td></tr><tr><td>eta</td><td>&#x2F;‘i:tə&#x2F;</td><td>Η</td><td>η</td><td>tau</td><td>&#x2F;tɔ:&#x2F; 或 &#x2F;taʊ&#x2F;</td><td>Τ</td><td>τ</td></tr><tr><td>theta</td><td>&#x2F;‘θi:tə&#x2F;</td><td>Θ</td><td>θ</td><td>upsilon</td><td>&#x2F;ˈipsilon&#x2F;或 &#x2F;ˈʌpsɨlɒn&#x2F;</td><td>Υ</td><td>υ</td></tr><tr><td>iota</td><td>&#x2F;aɪ’əʊtə&#x2F;</td><td>Ι</td><td>ι ℩</td><td>phi</td><td>&#x2F;faɪ&#x2F;</td><td>Φ</td><td>φ</td></tr><tr><td>kappa</td><td>&#x2F;‘kæpə&#x2F;</td><td>Κ</td><td>κ</td><td>chi</td><td>&#x2F;kaɪ&#x2F;</td><td>Χ</td><td>χ</td></tr><tr><td>lambda</td><td>&#x2F;‘læmdə&#x2F;</td><td>Λ</td><td>λ</td><td>psi</td><td>&#x2F;psaɪ&#x2F;</td><td>Ψ</td><td>ψ</td></tr><tr><td>mu</td><td>&#x2F;mju:&#x2F;</td><td>Μ</td><td>μ</td><td>omega</td><td>&#x2F;‘əʊmɪɡə&#x2F;或 &#x2F;oʊ’meɡə&#x2F;</td><td>Ω</td><td>ω</td></tr></tbody></table><ul><li>alpha常用作形容词，以显示某件事物中最重要或最初的。</li><li>beta也能表示电脑软件的测试版，通常指的是公开测试版，提供一般使用者协助测试并回报问题。</li><li>Ι ι ℩ 有时用来表示微细的差别。</li><li>Δ在初中数学里也表示一元二次方程的判别式，事实上，不少希腊字母被用在数学和物理上。</li><li>Ο ο Omicron(国际音标&#x2F;‘ɑmɪ,krɑn&#x2F;)字面上的意思是“小的O”，以便与“大O”区别。</li><li>Σ σ ς 在<a href="https://baike.baidu.com/item/%E5%B8%8C%E8%85%8A">希腊</a>语中，如果一个单词的最末一个字母是小写σ，要把该字母写成 ς。</li><li>Ψ ψ 意为神秘的、未知的。</li><li>Ω ω 用作指事情的终结，对应指开始的alpha。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 搬运 </tag>
            
            <tag> 英语 </tag>
            
            <tag> 语音 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>具体数学-汉诺塔问题</title>
      <link href="/2018/10/01/%E6%B1%89%E8%AF%BA%E5%A1%94%E9%97%AE%E9%A2%98/"/>
      <url>/2018/10/01/%E6%B1%89%E8%AF%BA%E5%A1%94%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>设$T_n$：将$n$个圆盘从一根桩移动到另一根桩所需最少移动次数。</p><p>思路：先把$n-1$个小的圆盘移动到另一个桩上（需要$T_{n-1}$次），再移动最大的圆盘（需要$1$次），最后将$n-1$个小圆盘移到最大圆盘上（需要$T_{n-1}$次）。</p><p>$$<br>T_n&#x3D;2T_{n-1}+1,n&gt;0<br>$$</p><p>$$<br>T_n &#x3D; 2^n-1, n \geqslant 0<br>$$</p><p>关键词： 数学归纳法（mathematical  induction）</p><h2 id="C-实现显示汉诺塔的移动步骤"><a href="#C-实现显示汉诺塔的移动步骤" class="headerlink" title="C++实现显示汉诺塔的移动步骤"></a>C++实现显示汉诺塔的移动步骤</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> g_cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Move</span><span class="params">(<span class="type">char</span> src, <span class="type">char</span> dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; src &lt;&lt; <span class="string">&quot;-&gt;&quot;</span> &lt;&lt; dst &lt;&lt; endl;</span><br><span class="line">    ++g_cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Hanoi</span><span class="params">(<span class="type">int</span> n, <span class="type">char</span> src, <span class="type">char</span> tmp, <span class="type">char</span> dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Move</span>(src, dst);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Hanoi</span>(n<span class="number">-1</span>, src, dst, tmp);</span><br><span class="line"><span class="built_in">Move</span>(src, dst);</span><br><span class="line"><span class="built_in">Hanoi</span>(n<span class="number">-1</span>, tmp, src, dst);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">Hanoi</span>(n, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">    cout &lt;&lt; g_cnt;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 数学 </tag>
            
            <tag> 加工 </tag>
            
            <tag> 题目 </tag>
            
            <tag> 算法 </tag>
            
            <tag> 书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>刘汝佳算法竞赛指南-hints</title>
      <link href="/2018/08/09/%E5%88%98%E6%B1%9D%E4%BD%B3%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E6%8C%87%E5%8D%97hints/"/>
      <url>/2018/08/09/%E5%88%98%E6%B1%9D%E4%BD%B3%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E6%8C%87%E5%8D%97hints/</url>
      
        <content type="html"><![CDATA[<p>1-1：整数值用%d输出，实数用%f输出。<br>1-2：整数&#x2F;整数&#x3D;整数，浮点数&#x2F;浮点数&#x3D;浮点数。<br>1-3：<code>scanf</code>中的占位符和变量的数据类型应一一对应，且每个变量前需要加<code>&amp;</code>符号。<br>1-4：在算法竞赛中，输入前不要打印提示信息。输出完毕后应立即终止程序，不要等待用户按键，因为输入输出过程都是自动的，没有人工干预。<br>1-5：在算法竞赛中不要使用头文件<code>conio.h</code>，包括<code>getch()</code>、<code>clrscr()</code>等函数。<br>1-6：在算法竞赛中，每行输出均应以回车符结束，包括最后一行。除非特别说明，每行的行首不应有空格，但行末通常可以有多余空格。另外，输出的每两个数或者字符串之间应以单个空格隔开。<br>1-7：尽量用<code>const</code>关键字声明常数。<br>1-8：赋值是个动作，先计算右边的值，再赋给左边的变量，覆盖它原来的值。<br>1-9：<code>printf</code>的格式字符串中可以包含其他可打印符号，打印时原样输出。<br>1-10：算法竞赛的题目应当是严密的，各种情况下的输出均应有严格规定。如果在比赛中发现题目有漏洞，应向相关人员询问，尽量不要自己随意假定。<br>1-11：赋值<code>a = b</code>之后，变量a原来的值被覆盖，而b的值不变。<br>1-12：可以通过手工模拟的方法理解程序的执行方式，重点在于记录每条语句执行之后各个变量的值。<br>1-13：交换两个变量的三变量法适用范围广，推荐使用。<br>1-14：算法竞赛是在比谁能更好地解决问题，而不是在比谁写的程序看上去更高级。<br>1-15：<code>if</code>语句的基本格式为：<code>if</code>（条件）语句1；<code>else</code>语句2。<br>1-16：<code>if</code>语句的条件是一个逻辑表达式，它的值可能为真，也可能为假。单个整数值也可以表示真假，其中0为假，其他值为真。<br>1-17：C语言中的逻辑运算符都是短路运算符。一旦能够确定整个表达式的值，就不再继续计算。<br>1-18：算法竞赛的目标是编程对任意输入均得到正确的结果，而不仅是样例数据。<br>1-19：如果有多个并列、情况不交叉的条件需要一一处理，可以用<code>else if</code>语句。<br>1-20：适当在程序中编写注释不仅能让其他用户更快地搞懂你的程序，还能帮你自己理清思路。<br>1-21：可以用花括号把若干条语句组合成一个整体。这些语句仍然按顺序执行。 </p><p>2-1：<code>for</code>循环的格式为：<code>for</code>（初始化；条件；调整）循环体；<br>2-2：尽管<code>for</code>循环反复执行相同的语句，但这些语句每次的执行效果往往不同。<br>2-3：编写程序时，要特别留意“当前行”的跳转和变量的改变。<br>2-4：建议尽量缩短变量的定义范围。例如，在for循环的初始化部分定义循环变量。<br>2-5：不拘一格地使用伪代码来思考和描述算法是一种值得推荐的做法。<br>2-6：把伪代码改写成代码时，一般先选择较为容易的任务来完成。<br>2-7：浮点运算可能存在误差。在进行浮点数比较时，应考虑到浮点误差。<br>2-8：<code>while</code>循环的格式为“<code>while</code>（条件）循环体；”。<br>2-9：当需要统计某种事物的个数时，可以用一个变量来充当计数器。<br>2-10：不要忘记测试。一个看上去正确的程序可能隐含错误。<br>2-11：在观察无法找出错误时，可以用“输出中间结果”的方法查错。<br>2-12：C99并没有规定<code>int</code>类型的确切大小，但在当前流行的竞赛平台中，<code>int</code>都是32位整数，范围是-2147483648～2147483647。<br>2-13：<code>long long</code>在Linux下的输入输出格式符为<code>％lld</code>，但Windows平台中有时为<code>％I64d</code>。为保险起见，可以用后面介绍的C＋＋流，或者编写自定义输入输出函数。<br>2-14：<code>do-while</code>循环的格式为“<code>do</code>{循环体}<code>while</code>（条件）；”，其中循环体至少执行一次，每次执行完循环体后判断条件，当条件满足时继续循环。<br>2-15：在循环体开始处定义的变量，每次执行循环体时会重新声明并初始化。<br>2-16：要计算只包含加法、减法和乘法的整数表达式除以正整数n的余数，可以在每步计算之后对n取余，结果不变。<br>2-17：可以使用<code>time.h</code>和<code>clock（）</code>函数获得程序运行时间。常数<code>CLOCKS_PER_SEC</code>和操作系统相关，请不要直接使用<code>clock（）</code>的返回值，而应总是除以<code>CLOCKS_PER_SEC</code>。<br>2-18：很多程序的运行时间与规模n存在着近似的简单关系。可以通过计时函数来发现或验证这一关系。<br>2-19：在Windows下，输入完毕后先按<code>Enter</code>键，再按<code>Ctrl＋Z</code>键，最后再按<code>Enter</code>键，即可结束输入。在Linux下，输入完毕后按<code>Ctrl＋D</code>键即可结束输入。<br>2-20：变量在未赋值之前的值是不确定的。特别地，它不一定等于0。<br>2-21：请在比赛之前了解文件读写的相关规定：是标准输入输出（也称标准I&#x2F;O，即直接读键盘、写屏幕），还是文件输入输出？如果是文件输入输出，是否禁止用重定向方式访问文件？<br>2-22：在算法竞赛中，选手应严格遵守比赛的文件名规定，包括程序文件名和输入输出文件名。不要弄错大小写，不要拼错文件名，不要使用绝对路径或相对路径。<br>2-23：在算法竞赛中，有经验的选手往往会使用条件编译指令并且将重要的测试语句注释掉而非删除。<br>2-24：在算法竞赛中，如果不允许使用重定向方式读写数据，应使用<code>fopen</code>和<code>fscanf/fprintf</code>进行输入输出。<br>2-25：在算法竞赛中，偶尔会出现输入输出错误的情况。如果程序鲁棒性强，有时能在数据有瑕疵的情况下仍然给出正确的结果。程序的鲁棒性在工程中也非常重要。<br>2-26：在多数据的题目中，一个常见的错误是：在计算完一组数据后某些变量没有重置，影响到下组数据的求解。<br>2-27：当嵌套的两个代码块中有同名变量时，内层的变量会屏蔽外层变量，有时会引起十分隐蔽的错误。<br>2-28：用编译选项-Wall编译程序时，会给出很多（但不是所有）警告信息，以帮助程序员查错。但这并不能解决所有的问题：有些“错误”程序是合法的，只是这些动作不是所期望的。  </p><p>3-1：语句“<code>int a[maxn]</code>”声明了一个包含maxn个整型变量的数组，即a[0]，a[1]，…，a[maxn-1]，但不包含a[maxn]。maxn必须是常数，不能是变量。<br>3-2：在算法竞赛中，常常难以精确计算出需要的数组大小，数组一般会声明得稍大一些。在空间够用的前提下，浪费一点不会有太大影响。<br>3-3：对于变量n，n＋＋和＋＋n都会给n加1，但当它们用在一个表达式中时，行为有所差别：n＋＋会使用加1前的值计算表达式，而＋＋n会使用加1后的值计算表达式。“＋＋”运算符是C语言的特色之一。<br>3-4：比较大的数组应尽量声明在<code>main</code>函数外，否则程序可能无法运行。<br>3-5：可以用“<code>int a[maxn][maxm]</code>”生成一个整型的二维数组，其中maxn和maxm不必相等。这个数组共有maxn×maxm个元素，分别为a[0][0], a[0][1],…, a[0][maxm-1], a[1][0],a[1][1],…,a[1][maxm-1],…,a[maxn-1][0],a[maxn-1][1],…, a[maxn-1][maxm -1]。<br>3-6：可以利用C语言简洁的语法，但前提是保持代码的可读性。<br>3-7：在很多情况下，最好是在做一件事之前检查是不是可以做，而不要做完再后悔。因为“悔棋”往往比较麻烦。<br>3-8：C语言中的字符型用关键字char表示，它实际存储的是字符的ASCII码。字符常量可以用单引号法表示。在语法上可以把字符当作int型使用。<br>3-9：在“<code>scanf(&quot;%s&quot;, s)</code>”中，不要在s前面加上“&amp;”符号。如果是字符串数组<code>char s\[maxn][maxl]</code>，可以用“<code>scanf(&quot;%s&quot;, s[i])</code>”读取第i个字符串。注意，“<code>scanf(&quot;%s&quot;, s)</code>”遇到空白字符会停下来。<br>3-10：可以用<code>sprintf</code>把信息输出到字符串，用法和<code>printf</code>、<code>fprintf</code>类似。但应当保证字符串足够大，可以容纳输出信息。<br>3-11：C语言中的字符串是以“\0”结尾的字符数组，可以用<code>strlen(s)</code>返回字符串s中结束标记之前的字符个数。字符串中的各个字符是s[0], s[1],…,s[strlen(s)-1]。<br>3-12：由于字符串的本质是数组，它也不是“一等公民”，只能用<code>strcpy(a, b)</code>, <code>strcmp(a, b)</code>, <code>strcat(a, b)</code>来执行“赋值”、“比较”和“连接”操作，而不能用“&#x3D;”、“&#x3D;&#x3D;”、“&lt;&#x3D;”、“+”等运算符。上述函数都在<code>string.h</code>中声明。<br>3-13：滥用“++”、“—”、“+&#x3D;”等可以修改变量值的运算符很容易带来隐蔽的错误。建议每条语句最多只用一次这种运算符，并且所修改的变量在整条语句中只出现一次。<br>3-14：使用<code>fgetc(fin)</code>可以从打开的文件fin中读取一个字符。一般情况下应当在检查它不是EOF后再将其转换成char值。从标准输入读取一个字符可以用<code>getchar</code>，它等价于<code>fgetc(stdin)</code>。<br>3-15：在使用<code>fgetc</code>和<code>getchar</code>时，应该避免写出和操作系统相关的程序。<br>3-16：”<code>fgets(buf, maxn, fin)</code>“将读取完整的一行放在字符数组buf中。应当保证buf足够存放下文件的一行内容。除了在文件结束前没有遇到“\n”这种特殊情况外，buf总是以“\n”结尾。当一个字符都没有读到时，<code>fgets</code>返回NULL。<br>3-17：C语言并不禁止程序读写”非法内存”。例如，声明的是<code>char s[100]</code>，完全可以赋值<code>s[10000] = &#39;a&#39;</code>（甚至-Wall也不会警告），但后果自负。<br>3-18：C语言中的<code>gets(s)</code>存在缓冲区溢出漏洞，不推荐使用。在C11标准里，该函数已被正式删除。<br>3-19：善用常量数组往往能简化代码。定义常量数组时无须指明大小，编译器会计算。<br>3-20：头文件<code>ctype.h</code>中定义的<code>isalpha</code>、<code>isdigit</code>、<code>isprint</code>等工具可以用来判断字符的属性，而<code>toupper</code>、<code>tolower</code>等工具可以用来转换大小写。如果ch是大写字母，则ch-‘A’就是它在字母表中的序号（A的序号是0，B的序号是1，依此类推）；类似地，如果ch是数字，则ch-‘0’就是这个数字的数值本身。<br>3-21：字符还可以直接用ASCII码表示。如果用八进制，应该写成：“\o”，“\oo”或“\ooo”（o为一个八进制数字）；如果用十六进制，应该写成“\xh”（h为十六进制数字串）。<br>3-22：在多数计算机内部，整数采用的是补码表示法。  </p><p>4-1：C语言中的数学函数可以定义成“返回类型 函数名(参数列表) { 函数体 }”，其中函数体的最后一条语句应该是“<code>return</code> 表达式；”。<br>4-2：函数的参数和返回值最好是“一等公民”，如<code>int</code>、<code>char</code>或者<code>double</code>等。其他“非一等公民”作为参数和返回值要复杂一些。如果函数不需要返回值，则返回类型应写成<code>void</code>。<br>4-3：如果在执行函数的过程中碰到了return语句，将直接退出这个函数，不去执行后面的语句。相反，如果在执行过程中始终没有return语句，则会返回一个不确定的值。幸好，-Wall可以捕捉到这一可疑情况并产生警告。<br>4-4：在算法竞赛中，请总是让main函数返回0。<br>4-5：在C语言中，定义结构体的方法为“struct 结构体名称{ 域定义 };”，注意花括号的后面还有一个分号。<br>4-6：为了使用方便，往往用“typedef struct { 域定义; }类型名;”的方式定义一个新类型名。这样，就可以像原生数据类型一样使用这个自定义类型。<br>4-7：即使最终答案在所选择的数据类型范围之内，计算的中间结果仍然可能溢出。<br>4-8：对复杂的表达式进行化简有时不仅能减少计算量，还能减少甚至避免中间结果溢出。<br>4-9：建议把谓词（用来判断某事物是否具有某种特性的函数）命名成“is_xxx”的形式，返回int值，非0表示真，0表示假。<br>4-10：编写函数时，应尽量保证该函数能对任何合法参数得到正确的结果。如若不然，应在显著位置标明函数的缺陷，以避免误用。<br>4-11：函数的形参和在函数内声明的变量都是该函数的局部变量。无法访问其他函数的局部变量。局部变量的存储空间是临时分配的，函数执行完毕时，局部变量的空间将被释放，其中的值无法保留到下次使用。在函数外声明的变量是全局变量，可以被任何函数使用。操作全局变量有风险，应谨慎使用。<br>4-12：C语言用调用栈（Call Stack）来描述函数之间的调用关系。调用栈由栈帧（Stack Frame）组成，每个栈帧对应着一个未运行完的函数。在gdb中可以用backtrace（简称bt）命令打印所有栈帧信息。若要用p命令打印一个非当前栈帧的局部变量，可以用frame命令选择另一个栈帧。<br>4-13：C语言的变量都是放在内存中的，而内存中的每个字节都有一个称为地址（address）的编号。每个变量都占有一定数目的字节（可用sizeof运算符获得），其中第一个字节的地址称为变量的地址。<br>4-14：用int* a声明的变量a是指向int型变量的指针。赋值a &#x3D; &amp;b的含义是把变量b的地址存放在指针a中，表达式*a代表a指向的变量，既可以放在赋值符号的左边（左值），也可以放在右边（右值）。<br>4-15：千万不要滥用指针，这不仅会把自己搞糊涂，还会让程序产生各种奇怪的错误。事实上，本书的程序会很少使用指针。<br>4-16：以数组为参数调用函数时，实际上只有数组首地址传递给了函数，需要另加一个参数表示元素个数。除了把数组首地址本身作为实参外，还可以利用指针加减法把其他元素的首地址传递给函数。<br>4-17：C语言支持递归，即函数可以直接或间接地调用自己。但要注意为递归函数编写终止条件，否则将产生无限递归。<br>4-18：由于使用了调用栈，C语言支持递归。在C语言中，调用自己和调用其他函数并没有本质不同。<br>4-19：在可执行文件中，正文段（Text Segment）用于储存指令，数据段（Data Segment）用于储存已初始化的全局变量，BSS段（BSS Segment）用于储存未赋值的全局变量所需的空间。<br>4-20：在运行时，程序会动态创建一个堆栈段，里面存放着调用栈，因此保存着函数的调用关系和局部变量。<br>4-21：在Linux中，栈大小并没有储存在可执行程序中，只能用ulimit命令修改；在Windows中，栈大小储存在可执行程序中，用gcc编译时可以通过-Wl,–stack&#x3D;&lt;byte count&gt;指定。  </p><p>5-1：C＋＋的精华与糟粕并存。本章介绍的C＋＋特性是算法竞赛中最常用的部分，虽然不是解题所必需的，但值得学习。<br>5-2：C＋＋能编译大多数C语言程序。虽然C语言中大多数头文件在C＋＋中仍然可以使用，但推荐的方法是在C头文件之前加一个小写的c字母，然后去掉.h后缀。<br>5-3：C＋＋中可以使用流简化输入输出操作。标准输入输出流在头文件iostream中定义，存在于名称空间std中。如果使用了using namespace std语句，则可以直接使用。<br>5-4：C＋＋中的引用就是变量的“别名”，它可以在一定程度上代替C中的指针。例如，可以用“传引用”的方式让函数内直接修改实参。<br>5-5：C＋＋在string头文件里定义了string类型，直接支持流式读写。string有很多方便的函数和运算符，但速度有些慢。<br>5-6：可以把string作为流进行读写，定义在sstream头文件中。<br>5-7：C＋＋中的结构体除了可以拥有成员变量（用a.x的方式访问）之外，还可以拥有成员函数（用a.add（1，2）的方式访问）。为了简单起见，本书中只使用struct而不使用class，但struct的很多概念和写法同样适用于class。<br>5-8：C＋＋中的结构体可以有一个或多个构造函数，在声明变量时调用。<br>5-9：C＋＋中的函数（不只是构造函数）参数可以拥有默认值。<br>5-10：在C＋＋结构体的成员函数中，this是指向当前对象的指针。<br>5-11：algorithm头文件中的sort可以给任意对象排序，包括内置类型和自定义类型，前提是类型定义了“&lt;”运算符。排序之后可以用lower_bound查找大于或等于x的第一个位置。待排序／查找的元素可以放在数组里，也可以放在vector里。<br>5-12：vector头文件中的vector是一个不定长数组，可以用clear( )清空，resize( )改变大小，用push_back( )和pop_back( )在尾部添加和删除元素，用empty( )测试是否为空。vector之间可以直接赋值或者作为函数的返回值，像是“一等公民”一样。<br>5-13：set头文件中的set和map头文件中的map分别是集合与映射。二者都支持insert、find、count和remove操作，并且可以按照从小到大的顺序循环遍历其中的元素。map还提供了“[]”运算符，使得map可以像数组一样使用。事实上，map也称为“关联数组”。<br>5-14：STL的stack头文件提供了栈，用“stack&lt;int&gt;s”方式定义，用push( )和pop( )实现元素的入栈和出栈操作，top( )取栈顶元素（但不删除）。<br>5-15：STL的queue头文件提供了队列，用“queue&lt;int&gt;s”方式定义，用push( )和pop( )进行元素的入队和出队操作，front( )取队首元素（但不删除）。<br>5-16：STL的queue头文件提供了优先队列，用“priority_queue&lt;int&gt;s”方式定义，用push( )和pop( )进行元素的入队和出队操作，top( )取队首元素（但不删除）。<br>5-17：库不一定没有bug，使用之前测试库是一个好习惯。<br>5-18：cstdlib中的rand( )可生成闭区间[0，RAND_MAX]内均匀分布的随机整数，其中RAND_MAX至少为32767。如果要生成更大的随机整数，在精度要求不太高的情况下可以用rand( )的结果“放大”得到。<br>5-19：可以用cstdlib中的srand函数初始化随机数种子。如果需要程序每次执行时使用一个不同的种子，可以用ctime中的time（NULL）为参数调用srand。一般来说，只在程序执行的开头调用一次srand。<br>5-20：把vector作为参数或者返回值时，应尽量改成用引用方式传递参数，以避免不必要的值被复制。<br>5-21：C＋＋支持函数重载，但函数的参数类型必须不同（不能只有返回值类型不同）。<br>5-22：测试时往往使用assert。其用法是“assert（表达式）”，当表达式为假时强行终止程序，并给出错误提示。<br>5-23：可以给结构体重载赋值运算符，使得用起来更方便。<br>5-24：可以给结构体声明一些属于该结构体类型的静态成员变量，方法是加上static修饰符。静态成员变量在结构体外部使用时要写成“结构体名：：静态成员变量名”。  </p><p>6-1：如果要在“队列”两端进行插入和删除，可以用STL中的双端队列deque。<br>6-2：简单的表达式解析可以借助栈来完成。<br>6-3：在数组中频繁移动元素是很低效的，如有可能，可以使用链表。<br>6-4：为了方便起见，常常在链表的第一个元素之前放一个虚拟结点。<br>6-5：在双向链表这样的复杂链式结构中，往往会编写一些辅助函数用来设置链接关系。<br>6-6：如果数据结构上的某一个操作很耗时，有时可以用加标记的方式处理，而不需要真的执行那个操作。但同时，该数据结构的所有其他操作都要考虑这个标记。<br>6-7：复杂的链式数据结构往往较容易写错。在包含多道题目的算法竞赛中，这一特点可以是选题的依据之一。<br>6-8：测试的任务就是检查一份代码是否正确。如果找到了错误，最好还能提供一个让它出错的数据；调试的任务是找到错误原因并改正。改正一个错误之后有可能引入新的错误，因此调试和测试往往要交替进行。<br>6-9：测试数据结构程序的常用方法是对拍：写一个功能相同但速度较慢的简易版本，再写一个数据生成器，不停对比快慢两个程序的输出。简易版本的代码越简单越好，因为重点不在效率，而在正确性。<br>6-10：数据的复杂性会大大影响调试的难度，因此在找到让程序出错的数据之后最好别急着调试，而应尝试简化数据，或者直接用更小的参数调用数据生成器，以找到更简单的错误数据。<br>6-11：给定一棵包含2d个结点（其中d为树的高度）的完全二叉树，如果把结点从上到下从左到右编号为1,2,3……，则结点k的左右子结点编号分别为2k和2k+1。<br>6-12：如果要定义一棵二叉树，一般是定义一个“结点”类型的struct（如叫Node），然后保存树根的指针（如Node* root）。<br>6-13：可以用new运算符申请空间并执行构造函数。如果返回值为NULL，说明空间不足，申请失败。<br>6-14：可以用队列实现二叉树的层次遍历。这个方法还有一个名字，叫做宽度优先遍历（Breadth-First Search，BFS）。<br>6-15：如果程序动态申请内存，请注意内存泄漏。程序执行完毕后，操作系统会回收该程序申请的所有内存（包括泄漏的），所以在算法竞赛中内存泄漏往往不会造成什么影响。但是，从专业素养的角度考虑，请从现在开始养成好习惯，对内存泄漏保持警惕。<br>6-16：可以用数组来实现二叉树，方法是用整数表示结点编号，left[u]和right[u]分别表示u的左右子结点的编号。<br>6-17：可以用静态数组配合空闲列表来实现一个简单的内存池。虽然在大多数算法竞赛题目中用不上，但是内存池技术在高水平竞赛以及工程实践中都极为重要。<br>6-18：二叉树有3种深度优先遍历：先序遍历、中序遍历和后序遍历。<br>6-19：给定二叉树的中序遍历和后序遍历，可以构造出这棵二叉树。方法是根据后序遍历找到树根，然后在中序遍历中找到树根，从而找出左右子树的结点列表，然后递归构造左右子树。<br>6-20：当题目比较复杂时，建议先手算样例或者至少把样例的图示画出来，以免误解题意。<br>6-21：图也有DFS遍历和BFS遍历，其中前者用递归实现，后者用队列实现。求多维数组连通块的过程也称为种子填充（floodfill）。<br>6-22：很多复杂的迷宫问题都可以转化为最短路问题，然后用BFS求解。在套用BFS框架之前，需要先搞清楚图中的“结点”包含哪些内容。<br>6-23：使用BFS求出图的最短路之后，可以用递归方式打印最短路的具体路径。如果最短路非常长，递归可能会引起栈溢出，此时可以改用循环，用vector保存路径。<br>6-24：可以用DFS求出有向无环图（DAG）的拓扑排序。如果排序失败，说明该有向图存在有向环，不是DAG。<br>6-25：根据连通性和度数可以判断出无向图和有向图是否存在欧拉道路和欧拉回路。可以用DFS构造欧拉回路和欧拉道路。  </p><p>7-1：即使采用暴力法求解问题，对问题进行一定的分析往往会让算法更简洁、高效。<br>7-2：如果某问题的解可以由多个步骤得到，而每个步骤都有若干种选择（这些候选方案集可能会依赖于先前作出的选择），且可以用递归枚举法实现，则它的工作方式可以用解答树来描述。<br>7-3：枚举排列的常见方法有两种：一是递归枚举，二是用STL中的next_permutation。<br>7-4：在枚举子集的增量法中，需要使用定序的技巧，避免同一个集合枚举两次。<br>7-5：在枚举子集的位向量法中，解答树的结点数略多，但在多数情况下仍然够快。<br>7-6：可以用二进制表示子集，其中从右往左第i位（从0开始编号）表示元素i是否在集合中（1表示“在”，0表示“不在”）。<br>7-7：当用二进制表示子集时，位运算中的按位与、或、异或对应集合的交、并和对称差。<br>7-8：从代码量看，枚举子集的最简单方法是二进制法。<br>7-9：在编写递归枚举程序之前，需要深入分析问题，对模型精雕细琢。一般还应对解答树的结点数有一个粗略的估计，作为评价模型的重要依据，如图7-5所示。<br>7-10：当把问题分成若干步骤并递归求解时，如果当前步骤没有合法选择，则函数将返回上一级递归调用，这种现象称为回溯。正是因为这个原因，递归枚举算法常被称为回溯法，应用十分普遍。<br>7-11：如果在回溯法中使用了辅助的全局变量，则一定要及时把它们恢复原状。特别地，若函数有多个出口，则需在每个出口处恢复被修改的值。<br>7-12：如果最坏情况下的枚举量很大，应该使用回溯法而不是生成-测试法。<br>7-13：在回溯法中，应注意避免不必要的判断，就像在八皇后问题中那样，只需判断新皇后和之前的皇后是否冲突，而不必判断以前的皇后是否相互冲突。<br>7-14：在求最优解的问题中，应尽量考虑最优性剪枝。这往往需要记录下当前最优解，并且想办法“预测”一下从当前结点出发是否可以扩展到更好的方案。具体来说，先计算一下最理想情况可以得到怎样的解，如果连理想情况都无法得到比当前最优解更好的方案，则剪枝。<br>7-15：路径寻找问题可以归结为隐式图的遍历，它的任务是找到一条从初始状态到终止状态的最优路径，而不是像回溯法那样找到一个符合某些要求的解。<br>7-16：隐式图遍历需要用一个结点查找表来判重。一般来说，使用STL集合实现的代码最简单，但效率也较低。如果题目对时间要求很高，可以先把STL集合版的程序调试通过，然后转化为哈希表甚至完美哈希表。<br>7-17：对于可以用回溯法求解但解答树的深度没有明显上限的题目，可以考虑使用迭代加深搜索（iterative deepening）。<br>7-18：如果可以设计出一个乐观估价函数，预测从当前结点至少还需要扩展几层结点才有可能得到解，则迭代加深搜索变成了IDA*算法。<br>：要事先判断结点1是否可以到达结点k，否则会超时。</p><p>8-1：统计程序中“基本操作”的数量，可以排除机器速度的影响，衡量算法本身的优劣程度。<br>8-2：基本操作的数量往往可以写成关于“输入规模”的表达式，保留最大项并忽略系数后的简单表达式称为算法的渐进时间复杂度，用于衡量算法中基本操作数随规模的增长情况。<br>8-3：渐进时间复杂度忽略了很多因素，因而分析结果只能作为参考，并不是精确的。尽管如此，如果成功抓住了最主要的运算量所在，算法分析的结果常常十分有用。<br>8-4：在算法设计中，常常不进行精确分析，而是假定各种最坏情况同时取到，得到上界。在很多情况下，这个上界和实际情况同阶（称为“紧”的上界），但也有可能会因为分析方法不够好，得到“松”的上界。<br>8-5：在算法分析中，往往可以忽略“除法结果是否为整数”，而直接按照实数除法分析。这样的近似对最终结果影响很小，一般不会改变渐进时间复杂度。<br>8-6：递归方程$T(n)&#x3D;2T(n&#x2F;2)+\Theta(n); T(1)&#x3D;1$的解为$T(n)&#x3D;\Theta(n\log n)$。<br>8-7：归并排序的时间复杂度为O(nlogn)。对该算法稍加修改，可以统计序列中的逆序对的个数，时间复杂度不变。<br>8-8：快速排序的时间复杂度为：最坏情况O(n^2)，平均情况O(nlogn)，但实践中几乎不可能达到最坏情况，效率非常高。根据快速排序思想，可以在平均O(n)时间内选出数组中第k大的元素。<br>8-9：逐步缩小范围法是一种常见的思维方法。二分查找便是基于这种思路，它遵循分治三步法，把原序列划分成元素个数尽量接近的两个子序列，然后递归查找。二分查找只适用于有序序列，时间复杂度为O(logn)。<br>8-10：二分查找一般写成非递归形式。<br>8-11：用“上下界”函数求解范围统计问题的技巧非常有用，建议读者用心体会左闭右开区间的使用方法和上下界函数的实现细节。  </p><p>9-1：动态规划的核心是状态和状态转移方程。<br>9-2：用直接递归的方法计算状态转移方程，效率往往十分低下。其原因是相同的子问题被重复计算了多次。<br>9-3：可以用递推法计算状态转移方程。递推的关键是边界和计算顺序。在多数情况下，递推法的时间复杂度是：状态总数×每个状态的决策个数×决策时间。如果不同状态的决策个数不同，需具体问题具体分析。<br>9-4：可以用记忆化搜索的方法计算状态转移方程。当采用记忆化搜索时，不必事先确定各状态的计算顺序，但需要记录每个状态“是否已经计算过”。<br>9-5：在记忆化搜索中，可以为正在处理的表项声明一个引用，简化对它的读写操作。<br>9-6：根据各个状态的指标值可以依次确定各个最优决策，从而构造出完整方案。由于决策是依次确定的，所以很容易按照字典序打印出所有方案。<br>9-7：当程序中需要用到特殊值时，应确保该值在正常情况下不会被取到。这不仅意味着特殊值不能有“正常的理解方式”，而且也不能在正常运算中“意外得到”。<br>9-8：在记忆化搜索中，如果用特殊值表示“还没算过”，则必须将其和其他特殊值（如无解）区分开。<br>9-9：在记忆化搜索中，可以用vis数组记录每个状态是否计算过，以占用一些内存为代价增强程序的可读性，同时减少出错的可能。<br>9-10：当用递推法计算出各个状态的指标之后，可以用与记忆化搜索完全相同的方式打印方案。<br>9-11：无论是用记忆化搜索还是递推，如果在计算最优值的同时“顺便”算出各个状态下的第一次最优决策，则往往能让打印方案的过程更加简单、高效。这是一个典型的“用空间换时间”的例子。<br>9-12：传统的递推法可以表示成“对于每个状态i，计算f(i)”，或者称为“填表法”。这需要对于每个状态i，找到f(i)依赖的所有状态，在某些时候并不方便。另一种方法是“对于每个状态i，更新f(i)所影响到的状态”，或者称为“刷表法”，有时比填表法方便。但需要注意的是，只有当每个状态所依赖的状态对它的影响相互独立时才能用刷表法。<br>9-13：多阶段决策的最优化问题往往可以用动态规划解决，其中，状态及其转移类似于回溯法中的解答树。解答树中的“层数”，也就是递归函数中的“当前填充位置”cur，描述的是即将完成的决策序号，在动态规划中被称为“阶段”。<br>9-14：动态规划的适用性很广。不少可以用动态规划解决的题目，在条件稍微变化后只需对状态转移方程做少量修改即可解决新问题。<br>9-15：学习动态规划的题解，除了要理解状态表示及其转移方程外，最好思考一下为什么会想到这样的状态表示。<br>9-16：在多阶段决策问题中，阶段定义了天然的计算顺序。<br>9-17：在递推法中，如果计算顺序很特殊，而且计算新状态所用到的原状态不多，可以尝试用滚动数组减少内存开销。<br>9-18：在使用滚动数组后，解的打印变得困难了，所以在需要打印方案甚至要求字典序最小方案的场合，应慎用滚动数组。<br>9-19：位运算的优先级往往比较低。如果不确定表达式的计算顺序，应多用括号。<br>9-20：如果用二进制表示子集并进行动态规划，集合中的元素就隐含了阶段信息。例如，可以把集合中的最大元素想象成“阶段”。<br>9-21：即使状态定义相同，过多地考虑不必要的决策仍可能会导致时间复杂度上升。<br>9-22：如果S’是S的真子集，则一定有S’&lt;S。在用递推法实现子集的动态规划时，该规则往往可以确定计算顺序。<br>9-23：枚举1～n的每个集合S的所有子集的总时间复杂度为O(3n)。    </p><p>10-1：设a, b, c为任意整数。若方程ax+by&#x3D;c的一组整数解为(x0,y0)，则它的任意整数解都可以写成(x0+kb’, y0-ka’)，其中a’&#x3D;a&#x2F;gcd(a,b)，b’&#x3D;b&#x2F;gcd(a,b)，k取任意整数。<br>10-2：设a, b, c为任意整数，g&#x3D;gcd(a,b)，方程ax+by&#x3D;g的一组解是(x0,y0)，则当c是g的倍数时ax+by&#x3D;c的一组解是(x0c&#x2F;g, y0c&#x2F;g)；当c不是g的倍数时无整数解。<br>10-3：a≡b(mod n)的含义是“a和b除以n的余数相同”，其充要条件是“a-b是n的整数倍”。<br>10-4：方程ax≡1(mod n)的解称为a关于模n的逆。当gcd(a,n)&#x3D;1时，该方程有唯一解；否则，该方程无解。<br>10-5：如果样本空间由有限个等概率的简单事件组成，事件E的概率可以用组合计数的方法得到:$P(E)&#x3D;\frac{|E|}{|S|}$<br>10-6：数学归纳法是一种利用递归的思想证明的方法。如果要讨论的对象具有某种递归性质（如正整数），可以考虑用数学归纳法。<br>10-7：满足$F_1, F_2&#x3D;1，F_n&#x3D;F_n-1+F_n-2$的数列称为Fibonacci数列，它的前若干项是1, 1, 2, 3, 5, 8, 13, 21, 34, 55,…。<br>10-8：在建立递推式时，经常会用到乘法原理，其核心是分步计数。如果可以把计数分成独立的两个步骤，则总数量等于两步计数之乘积。  </p><p>11-1：建立表达式树的一种方法是每次找到最后计算的运算符，然后递归建树。“最后计算”的运算符是在括号外的、优先级最低的运算符。如果有多个，根据结合性来选择：左结合的（如加、减、乘、除）选最右边；右结合的（如乘方）选最左边。根据规定，优先级相同的运算符的结合性总是相同。<br>11-2：在最大流问题中，容量c和流量&gt;f满足3个性质：容量限制（$f(u,v)≤c(u,v)$）、斜对称性（$f(u,v)&#x3D;-f(v,u)$）和流量平衡（对于除了结点s和t外的任意结点u，$\sum\limits_{(u,v)\in E} f(u,v)&#x3D;0$。问题的目标是最大化$|f|&#x3D;\sum\limits_{(s,v)\in E} f(s,v)&#x3D;\sum\limits_{(u,t)\in E} f(u,t)$，即从s点流出的净流量（它也等于流入t点的净流量）。<br>11-3：当且仅当残量网络中不存在s-t有向道路（增广路）时，此时的流是从s到t的最大流。<br>11-4：增广路算法结束时，令已标号结点（a[u]&gt;0的结点）集合为S，其他结点集合为T&#x3D;V-S，则(S, T)是图的s-t最小割。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 搬运 </tag>
            
            <tag> 算法 </tag>
            
            <tag> 书 </tag>
            
            <tag> 编程 </tag>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数阶乘</title>
      <link href="/2018/06/15/%E5%A4%A7%E6%95%B0%E9%98%B6%E4%B9%98/"/>
      <url>/2018/06/15/%E5%A4%A7%E6%95%B0%E9%98%B6%E4%B9%98/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintFact</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> result[<span class="number">1000</span>] = &#123;<span class="number">1</span>&#125;, len = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>, carry = <span class="number">0</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>, t; j &lt; len; carry = t / <span class="number">10</span>, ++j)</span><br><span class="line">            result[j] = (t = result[j] * i + carry) % <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">for</span> (; carry; carry /= <span class="number">10</span>)</span><br><span class="line">            result[len++] = carry % <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (len--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, result[len]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    PrintFact(n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 题目 </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
